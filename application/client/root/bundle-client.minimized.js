require=function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){return o(e[a][1][t]||t)}),u,u.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){e.exports='<div>Explore package<span class="ht cmd" style=margin-left:2em name=refresh title="refresh view">refresh</span></div><div name=package-view style="position:absolute;left:0px;top:2em;bottom:0px;right:0px;border-top:1px solid gray;overflow:auto"></div>'},{}],2:[function(t,e,n){var i=t(7),o=t(29);explorePackage={config:{htmlText:t(1),bindArray:[".refresh",["on","click","onClickRefresh"]],init:"init"},packageView:null,packageDataset:null,init:function(t){this.packageView=o.class(this.nme("package-view"))},setLocalLabel:function(t,e,n){this.packageView.localLabel=t,this.packageView.localLabelTitle=e,n&&this.packageView.nme(".info").addEventListener("click",n)},onClickRefresh:function(){this.updateView(this.packageDataset),this.nme(".package-view").firstChild.scrollTop=0},onInfoResize:function(){var t=this.nme("title",!0).parentNode.offsetHeight,e=this.nme("package-list.list");parseInt(e.style.top)!=t&&(e.style.top=t+"px")},popupOptions:{dragMode:"first",maximized:!0},updateView:function(t){this.packageDataset=t,this.packageView.updateView(t)}},e.exports.class=function(t,e){return i(t,Object.create(explorePackage),null,e)}},{1:1,29:29,7:7}],3:[function(t,e,n){e.exports='.state-bundle:after{content:"b";background:#0f0;margin-left:.5em}'},{}],4:[function(t,e,n){e.exports='<div name=project-list style="width:10em;position:absolute;left:0px;top:0px;bottom:0px;border-right:1px solid gray"><center><span style=font-weight:bold name=title>Projects</span> <span><span title="project tools" name=tool class="ht entity btn" style=font-size:9pt;vertical-align:top;margin:0.1em>&vellip;</span></span></center><div style=position:absolute;left:0px;top:1.5em;bottom:0px;right:0px;overflow:auto><div name=list style=padding:0.5em></div><div style="font-size: 9pt;text-align:right;padding:0.5em">count: <i name=list-count>0</i></div></div></div><div name=splitter style=position:absolute;top:0px;bottom:0px;left:10em;width:8px;z-index:1></div><div name=top-bar style="padding-bottom:0.1em;position:absolute;left:10em;top:0px;right:0px;border-bottom:1px solid gray;overflow:auto"><div style="font-size:9pt;padding:0em 1em;vertical-align:top"><span title="click to refresh" name=refresh-view style=cursor:default>View</span> <span name=view-type><label title="test page, click to refresh"><input type=radio value=page> page</label><label title="browse path files, click to refresh"><input type=radio value=browse> browse</label><label title="executing console view, click to refresh"><input type=radio value=console> console</label></span><span name=operate style=display:none><span style="padding:0px 0.5em">|</span><label title="bundle the test module, and watch code change."><input type=checkbox name=bundle>bundle</label><span title="more operations" name=more class="ht entity btn" style=font-size:9pt;vertical-align:top;margin:0.1em>&vellip;</span> </span><span name=browse-tool style=display:none><span style="padding:0px 0.5em">|</span> <span class="ht cmd" name=vscode title="open with local VsCode"><img src=res/logo-vscode-32.png border=0 style=height:1.2em;vertical-align:middle> </span><span name=file-exec></span> </span><span style=float:right><span class="ht cmd" name=add-package title="add package.json to project list" style=margin-right:1em;display:none>add</span> <span name=go-back title="go back" onclick=history.go(-1); style=display:none;cursor:pointer><img border=0 src=res/arrow-left.png style=height:1.2em;vertical-align:middle> </span><a style=color:blue href=about:blank target=_blank name=address-link title="open in new window">about:blank</a></span></div></div><div style=position:absolute;left:10em;top:1.5em;bottom:0px;right:0px;box-sizing:border-box><iframe name=iframe-page src=about:blank style=width:100%;height:100%;border:none></iframe></div><div name=iframe-mask style=visibility:hidden;position:absolute;left:10em;top:1.5em;bottom:0px;right:0px;box-sizing:border-box></div><div name=package-view></div>'},{}],5:[function(t,e,n){e.exports=function(t,e,n){var i;if(e&&(i=document.getElementById(e))){if("STYLE"!=i.tagName.toUpperCase())return;if(n)return!1;i.textContent=t}else{(i=document.createElement("style")).type="text/css",e&&(i.id=e);try{i.appendChild(document.createTextNode(t))}catch(e){i.styleSheet.cssText=t}document.getElementsByTagName("head")[0].appendChild(i)}return!0}},{}],6:[function(t,e,n){"use strict";var i=t(16),o=t(17),r=t(14),a=t(36),s=t(38),l=s.findWithFilter,c=s.mapValue,u=s.enclosePropertyDescriptor,p=t(25),d=t(12),h=function(t,e,n){t=o(t);var a=r(t);"string"==typeof n&&(n=Array.prototype.slice.call(arguments,2));var s,h,f=n[0],m=n[1];if("string"==typeof m?(s=m,m=null):(s=m.typeItem||m.item,h=m.valueMapper||m.map),!s)return i("bind typeItem empty",n);var g,b=n[2];if("function"==typeof b)g=b;else{if(!(b in e))return i("member unfound",b,n);g=e[b]}var v,y,x,k,w="function"==typeof g,L=w&&g===b?null:e,S=n[3],T=typeof S;if("boolean"===T?(v=S,S=null):"number"===T?(v=1&S,x=2&S,S=null):"string"===T?S&&(y=S,S=null):S&&(v=(y=S.notifyEvent||S.notify)||S.biDirection||S.bi,x=S.watchJs||S.watch,k=S.valueMapper||S.map),v||!y&&!x||(v=!0),"on"==f||"event"==f||"evt"==f){if(!w)return i("bind member is not a function",b,n);var C=function(t){return g.apply(L||this,[t,S])};return"on"==f?t["on"+s]=C:t.addEventListener(s,C,S&&S.listenerOptions),!0}if("attr"===f||"style"===f||"css"===f||"class"===f){if(w){var E="attr"===f?s:f;return"css"===E&&(E="style"),p(t,E,(function(t){return g.apply(L||this,[t,S])})),!0}if("attr"===f)A=l(null,g,c(k,t.getAttribute(s)||""),""),u(e,b,(function(t){t=""+c(h,t),o(a).getAttribute(s)!==t&&o(a).setAttribute(s,t)}),(function(){return c(k,o(a).getAttribute(s))})),v&&p(t,s,(function(t){e[b]=c(k,t.target.getAttribute(t.attributeName)||"")}));else if("style"===f||"css"===f){var A=l(null,g,c(k,t.style[s]||""),"");u(e,b,(function(t){t=""+c(h,t),o(a).style[s]!==t&&(o(a).style[s]=t)}),(function(){return c(k,o(a).style[s])})),v&&p(t,"style",(function(t){e[b]=c(k,t.target.style[s]||"")}))}else if("class"===f){A=l(null,g,c(k,t.classList.contains(s)),!1);u(e,b,(function(t){(t=!!c(h,t))&&!o(a).classList.contains(s)?o(a).classList.add(s):!t&&o(a).classList.contains(s)&&o(a).classList.remove(s)}),(function(){return c(k,o(a).classList.contains(s))})),v&&p(t,"class",(function(t){e[b]=c(k,t.target.classList.contains(s))}))}return e[b]=A,!0}if("prop"===f||"property"===f){if(!(s in t))return i("bind property unfound",s,n);if(w){C=function(t){return g.apply(L||this,[t,S])};return t.addEventListener(y||"change",C,S&&S.listenerOptions),x&&u(t,s,(function(t){d(a,y||"change",0)})),!0}A=l(null,g,c(k,t[s]||""));return u(e,b,(function(t){t=c(h,t),o(a)[s]!=t&&(o(a)[s]=t)}),(function(){return c(k,o(a)[s])})),v&&t.addEventListener(y||"change",(function(t){e[b]=c(k,o(a)[s])}),S&&S.listenerOptions),x&&u(t,s,(function(t){d(a,y||"change",0)})),e[b]=A,!0}return i("unknown bind type",f,n)},f=function(t,e,n){var s,l,c,u,p,d=t=o(t),f=n.length,m={"":r(d)};for(s=0;s<f;s++)if("string"!=typeof(l=n[s])){if(!(l instanceof Array))return i("bindItem is not an array",u,l);if(s&&!l[0]&&(p=n[s-1])instanceof Array&&(l[0]=p[0],l[1]||(l[1]=p[1])),(c=h(d,e,l))instanceof Error)return c}else{if(!(d=a(t,u=l)))return i("bind name path unfound",u,l);m[u]=r(d),u}return m};e.exports=n=h,n.bindElement=h,n.bindElementArray=f,n.array=f},{12:12,14:14,16:16,17:17,25:25,36:36,38:38}],7:[function(t,e,n){"use strict";var i=t(9),o=t(8),r=t(17),a=t(14),s=t(36),l=t(5),c=t(6),u=function(t,e,n){if("disable"!==t&&(void 0===t||t)){var i=n[""];t&&"dyna"===t.slice(0,4)?e.nme=function(t){return s(i,t)}:e.nme=function(t){if(t in n)return document.getElementById(n[t]);var e=s(i,t);return e&&(n[t]=a(e)),e}}};e.exports=function(t,e,n,s){var p;return"function"==typeof n&&3==arguments.length&&(s=n,n=null),n||(n=e.config||e),t=r(t),i(null,[function(t,e,i){return t?i.final(t):(!n.cssId||!r(n.cssId))&&(n.cssText||n.cssUrlText?"":n.cssUrl||"")},":loadCssUrl",function(t,e,i){o(n.cssUrl,"GET","",null,(function(t,e){n.cssUrlText=t?""+t.error:e.responseText||"",i.next(null,!0)}))},i.if(!0,null,i.joinAt(n.joinCss=n.joinCss||{},"loadCssUrl")),function(t,e,i){return t?i.final(t):(!n.cssUrlText&&!n.cssText||n.cssId&&r(n.cssId)||l(n.cssUrlText||n.cssText,n.cssId||(n.cssId=a(null,"bind-css-"))),!0)},function(t,e,i){return t?i.final(t):n.htmlText||n.htmlUrlText?"":n.htmlUrl||""},":loadHtmlUrl",function(t,e,i){o(n.htmlUrl,"GET","",null,(function(t,e){n.htmlUrlText=t?""+t.error:e.responseText||"",i.next(null,!0)}))},i.if(!0,null,i.joinAt(n.joinHtml=n.joinHtml||{},"loadHtmlUrl")),function(i,o,r){if(i)return r.final(i);if((n.htmlUrlText||n.htmlText)&&(t.innerHTML=(n.htmlUrlText||n.htmlText).replace(/\{\{\s*([^\s\}\:]+)\s*(\:([^\}]*))?\}\}/g,"<span name='$1'>$3</span>")),n.bindArray||"disable"!==n.nameTool&&!1!==n.nameTool){var a=c.array(t,e,n.bindArray||[]);if(a instanceof Error)return a;a&&u(n.nameTool,e,a)}var s=typeof n.init;return"function"===s?n.init.call(e,t):"string"===s&&e&&"function"==typeof e[n.init]&&e[n.init](t),!0},function(t,e,n){s?p?s(t,e):setTimeout((function(){s(t,e)}),0):t&&console.log(t),n.next(t,e)}]),p=!0,e}},{14:14,17:17,36:36,5:5,6:6,8:8,9:9}],8:[function(t,e,n){var i=function(t){if("string"!=typeof t)return t;var e,n={};return t.trim().split(/[\r\n]\s*/).map((function(t){(e=t.indexOf(":"))>0&&(n[t.slice(0,e).trim()]=t.slice(e+1).trim())})),n},o=function(t,e,n,o,r,a){var s,l="string"==typeof e?{method:e}:e||{};l.headers||(o?l.headers=o:"POST"===l.method&&(l.headers={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}));var c=function(){s&&(clearTimeout(s),s=null),r=null},u=new XMLHttpRequest;if(u.open(l.method,t,!0),l.headers)for(var p in l.headers)u.setRequestHeader(p,l.headers[p]);var d=0;return u.onreadystatechange=function(){if(4===u.readyState||0===u.readyState&&d){if(r){var t=u.getAllResponseHeaders(),e={responseText:u.responseText,statusCode:u.status,statusMessage:u.statusText,headerText:t,headers:i(t)};if(a&&(e.userData=a),200==u.status)r(null,e);else{var n=Error(u.status+" "+u.statusText+(u.responseText?", "+u.responseText.slice(0,255):""));for(var o in e)n[o]=e[o];r(n)}}c()}d=u.readyState},l.timeout>0&&(s=setTimeout((function(){if(r){var t=Error("timeout, "+l.timeout);a&&(t.userData=a),r(t)}s=null,c(),u.abort()}),l.timeout)),u.send(n),u},r=function(t,e,n,i,r,a){return o(t,e,n,i,(function(t,e){if(!t)try{e.responseJson=JSON.parse(e.responseText)}catch(i){for(var n in console.log(i),t=Error("JSON parse error, "+i.message),e)t[n]=e[n]}r&&r(t,e)}),a)};e.exports=n=o,n.requestText=o,n.requestJson=r,n.text=function(t,e,n,i,r,a){return o(t,e,n,i,(function(t,e){r&&r(t,t?e:e.responseText)}),a)},n.json=function(t,e,n,i,o,a){return r(t,e,n,i,(function(t,e){o&&o(t,t?e:e.responseJson)}),a)},n.parseHeaders=i},{}],9:[function(t,e,n){var i=function(t){return void 0!==t&&"number"!=typeof t};function o(t){this.root=this,this.operatorSet=t}var r=0;function a(t){return function(){var e=arguments;return function(n,i,o){return o[t].apply(o,[n,i].concat(Array.prototype.slice.call(e)))}}}o.prototype={debug:1,operatorSet:null,queue:null,labelSet:null,index:0,root:null,process:null,processId:null,state:0,processTmid:null,threadTmid:null,labelIndex:function(t,e){if(t in this.labelSet)return this.labelSet[t];if(e&&"function"==typeof this.operatorSet[t])return this.operatorSet[t];throw Error("unknown label, "+t)},buildQueue:function(t,e){t instanceof Array||(t=[t]),this.queue=[],this.labelSet={};var n,i,o,r,a,s,l,c,u=t.length;for(f=0;f<u;f++)if("number"!==(i=typeof(n=t[f]))){if("function"===i)(o=n).name&&"anonymous"!=o.name&&(a=a||o.name);else if("string"===i){if(":"===n.charAt(0)){s=s||n;continue}if(e&&e.queue&&e.operatorSet===this.operatorSet){if(n.indexOf(":")>0){for(var p=n.split(":").map((function(t){return e.labelIndex(t)})),d=p[0];d<=p[1];d++)(c=e.queue[d]).label&&(this.labelSet[c.label.replace(/^\:/,"")]=this.queue.length),this.queue.push(c);o=r=a=s=null;continue}if(n in e.labelSet){c=e.queue[e.labelIndex(n)],(c={timeout:r||c.timeout,label:s||a||c.label&&c.label.replace(/^\:/,""),op:c.op}).label&&(this.labelSet[c.label.replace(/^\:/,"")]=this.queue.length),this.queue.push(c),o=r=a=s=null;continue}}if(this.operatorSet&&n in this.operatorSet){if("function"!=typeof(o=this.operatorSet[n]))throw"cq format fail, not function label, "+n;a=n}else s?s!==n&&this.debug>0&&console.warn("WARN: cq parsing, duplicated label, "+s+", "+n):s=n}else if("object"===i&&(n.label&&(s=s||n.label),n.timeout&&(r=r||n.timeout),n.op))if("function"==typeof n.op)(o=n.op).name&&"anonymous"!=o.name&&(a=a||o.name);else{if(!this.operatorSet)throw"cq format fail, empty operatorSet for label, "+n.op;if("function"!=typeof(o=this.operatorSet[n.op]))throw"cq format fail, not function label, "+n.op;a=""+n.op}o&&((s=s||a)?(this.labelSet[s.replace(/^\:/,"")]=this.queue.length,l={label:s,timeout:r,op:o}):l={timeout:r,op:o},this.queue.push(l),o=r=a=s=null)}else r=r||n;if(!this.root.operatorSet){var h={};for(var f in this.labelSet)h[f]=this.queue[this.labelSet[f]].op;this.root.operatorSet=h}},run:function(t,e,n,o,a,s){i(o)&&(s=a,a=o,o=0);var l=Object.create(this.root);return l.process=l,l.processId=++r+(s?"-"+s:""),l.processTmid=null,l.threadTmid=null,l.index=0,l.buildQueue(n,this),l.state=1,o>0&&(l.processTmid=setTimeout((function(){1===l.state&&(l.state=3,a?l.jump("cq process timeout, "+o+", "+l.processId,null,a):l.processTmid=!1)}),o)),l.next(t,e)},pick:function(t,e,n,o,r,a,s){var l;if(i(o)&&(s=a,a=r,r=o,o=0),i(a)&&(s=a,a=0),!n||(l=n instanceof Array)&&!(n.length>0))return this.jump(t,e,r,a);var c=this,u=function(t,e,n){1==n.process.state&&n.next(),c.jump(t,e,r,a)};return l||(n=[n]),this.run(t,e,n.concat(u),o,u,s)},if:function(t,e,n,o,r,a,s,l,c){return i(a)&&(c=l,l=s,s=a,a=0),i(l)&&(c=l,l=0),n="function"==typeof n?n(t,e):null===n?!t:!0===n?!t&&e:!1===n?!t&&!e:!t&&e==n,this.pick(t,e,n?r:o,a,s,l,c)},loop:function(t,e,n,o,r,a,s,l){var c;i(s)&&(l=s,s=0),"function"==typeof n?n(c={error:t,data:e}):c=Object.create(n)||{};var u=0,p=function(t,e,n){return c.data=e,c.error=t,o&&o(c)||!o&&!t?n.pick(t,e,r,p,l?l+"-"+u++:null):n.jump(t,e,a,s)};return p(t,e,this)},jump:function(t,e,n,i){if(n){if("function"!=typeof n&&(n=this.labelIndex(n,!0)),"function"==typeof n)return n.call(this.operatorSet,t,e,this);this.process.index=n}return this.next(t,e,i)},final:function(t,e,n,i){if(!n)return this.process.index=this.queue.length-1,this.next(t,e,i);this.process.index=this.queue.length,this.pick(t,e,n,i)},next:function(t,e,n){if(this.threadTmid&&(clearTimeout(this.threadTmid),this.threadTmid=null),13!==this.state)if(12!==this.state){if(11===this.state)return this.state=12,this.process.next(t,e,n);if(3===this.state){if(!this.processTmid)return void(this.debug>0&&console.warn("WARN: cq blocked by process-timeout"));this.processTmid=!1}else{if(2===this.state)return void(this.debug>0&&console.warn("WARN: cq blocked by process-finished"));if(1!==this.state)throw Error("cq state unexpected, "+this.state)}if(this.process!==this)throw Error("cq process pointer fail");var i;for(!t||t instanceof Error||(t=Error(JSON.stringify(t).slice(0,300)));(i=this.queue[this.index])&&i.label&&":"===i.label.charAt(0);)this.index++;if(!i)return 3!=this.state&&(this.state=2),this.processTmid&&(clearTimeout(this.processTmid),this.processTmid=null),this.debug>1&&console.log("process finish, id='"+this.processId+"'"),t||e||null;this.index++;var o,r=Object.create(this);r.state=11,r.processTmid=null,r.threadTmid=null;try{o=i.op.call(this.operatorSet,t,e,r)}catch(t){this.debug>0&&console.warn("WARN: cq exception:",t),o=t instanceof Error?t:Error(t)}if(void 0!==o)return 12===r.state?void(this.debug>0&&console.warn("WARN: cq sync thread blocked")):13===r.state?void(this.debug>0&&console.warn("WARN: cq sync thread timeout blocked")):(r.state=12,o instanceof Error?this.next(o):this.next(null,o));if(11===r.state){var a=n>0?n:i.timeout;if(a){var s=this;r.threadTmid=setTimeout((function(){r.threadTmid=!1,r.state=13,s.next("cq thread timeout, "+a)}),a)}}}else this.debug>0&&console.warn("WARN: cq blocked by thread-finished");else this.debug>0&&console.warn("WARN: cq blocked by thread-timeout")},wait:function(t,e){var n=null,i=this;return t>0&&(n=setTimeout((function(){n=!1,i.next("cq wait-timeout, "+t)}),t)),function(o,r){if(!1!==n)return n&&(clearTimeout(n),n=null),i.next(o,r,e);i.debug>0&&console.warn("WARN: cq blocked by wait-timeout, "+t)}},waitVoid:function(t,e,n,i){var o=null,r=this;return n>0&&(o=setTimeout((function(){o=!1,r.next("cq waitVoid-timeout, "+n)}),n)),function(){if(!1!==o)return o&&(clearTimeout(o),o=null),r.next(t,e,i);r.debug>0&&console.warn("WARN: cq blocked by waitVoid-timeout, "+n)}},markCallback:function(t,e,n){return function(){return e.apply(n,[t].concat(Array.prototype.slice.apply(arguments)))}},fork:function(t,e,n,i,o){var r={},a=0,s=!1,l=Object.keys(n.pickSet).length,c=null,u=this;n.timeout>0&&(c=setTimeout((function(){c=!1,s=!0,u.jump("cq fork-timeout, "+n.timeout,[r,a,null],i,o)}),n.timeout));var p,d=n.mode||"all",h=function(t,e,n,p){if(!1!==c){if(!s){if(r[t]||(a++,r[t]=[e,n]),"all"===d){if(a<l)return;s=!0}else if("allOrError"===d){if(a<l&&!e)return;s=!0}else if("any"===d)s=!0;else if("anyData"===d){if(!n&&a<l)return;s=!0}s&&c&&(clearTimeout(c),c=null);var h=p.jump(null,[r,a,t],i,o);return!s&&h&&(s=!0,c&&(clearTimeout(c),c=null)),h}u.debug>0&&console.warn("WARN: fork blocked - "+d)}else u.debug>0&&console.warn("WARN: cq fork timeout blocked")};for(var f in n.pickSet)(p=n.pickSet[f])instanceof Array||!p.pickSet?this.pick(t,e,p,this.markCallback(f,h),(n.description||"")+":"+f):(p.description||(p.description=f),this.fork(t,e,p,this.markCallback(f,h)))},joinAt:function(t,e,n,o,r,a,s,l){if(i(r)&&(l=s,s=a,a=r,r=0),i(s)&&(l=s,s=0),!n||"object"!=typeof n)return this.pick(t,e,o,r,a,s,l);if(n.queDataList||(n.queDataList=[]),n.queDataList.push([this,a,s]),!n.running){n.running=!0;return this.pick(t,e,o,r,(function(t,e,i){for(var o,r,l,c;n.queDataList.length>0;){try{o=(c=n.queDataList.shift())[0].jump(t,e,c[1],c[2])}catch(t){console.warn("cq join exception",t),o=t}c[0]===i&&(r=o,l=!0)}return delete n.running,l?r:i.jump(t,e,a,s)}),l)}}};e.exports=n=function(t,e,n,r){if(!e)throw"cq empty operatorArray";return i(n)&&(r=n,n=0),new o(t).run(null,null,e,n,null,r)},n.class=o,n.isQue=function(t){return t instanceof o},n.jump=a("jump"),n.pick=a("pick"),n.if=a("if"),n.loop=a("loop"),n.final=a("final"),n.joinAt=a("joinAt"),n.fork=function(t,e,n,i){return function(o,r,a){return a.fork(o,r,{mode:t,pickSet:e},n,i)}}},{}],10:[function(t,e,n){Object.assign||(Object.assign=function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])}return n}),e.exports=function(t,e){return Object.assign.apply(Object,[Object.create(t)].concat(Array.prototype.slice.call(arguments,1)))}},{}],11:[function(t,e,n){var i=function(t,e,n){t instanceof Array||(t=[t]),e instanceof Array||(e=[e]);var i,o,r,a=t.length,s=e.length;for(i=0;i<a;i++)for("string"==typeof(r=t[i])&&(r=document.getElementById(r)),n&&r.classList.add(n),o=0;o<s;o++)r.classList.add(e[o])},o=function(t,e){t instanceof Array||(t=[t]),e instanceof Array||(e=[e]);var n,i,o,r=t.length,a=e.length;for(n=0;n<r;n++)for("string"==typeof(o=t[n])&&(o=document.getElementById(o)),i=0;i<a;i++)o.classList.remove(e[i])},r=function(t,e,n){t instanceof Array||(t=[t]),e instanceof Array||(e=[e]);var i,o,r,a=t.length,s=e.length;for(i=0;i<a;i++)for("string"==typeof(r=t[i])&&(r=document.getElementById(r)),n&&r.classList.add(n),o=0;o<s;o++)r.classList.toggle(e[o])},a={},s=function(t){if("string"!=typeof t)return null;if(t in a)return a[t];var e=function(e,n,a,s,l){return function(t,e,n,a,s){t instanceof Array||(t=[t]);var l,c,u=t.length;for(l=0;l<u;l++)"string"==typeof(c=t[l])&&(t[l]=document.getElementById(c));e&&i(t,e,s),n&&o(t,n),a&&r(t,a,s)}(e,n,a,s,l||t)};return e.set=e,e.setElement=e.setEl=function(e,n,a,s,l){return function(t,e,n,a,s){t instanceof Array||(t=[t]),e&&i(e,t,s),n&&o(n,t),a&&r(a,t,s)}(e,n,a,s,l||t)},e.add=function(e,n,o){return i(e,n,o||t)},e.toggle=function(e,n,i){return r(e,n,i||t)},e.remove=o,e.bind=s,a[t]=e};e.exports=s("")},{}],12:[function(t,e,n){e.exports=function(t,e,n){var i;"function"==typeof Event?i=new Event(e):(i=document.createEvent("Event")).initEvent(e,!0,!0),"string"==typeof t&&(t=document.getElementById(t)),n>=0?setTimeout((function(){t.dispatchEvent(i)}),n):t.dispatchEvent(i)}},{}],13:[function(t,e,n){var i={dragSet:null,dragSetCount:0,moveChanged:!1,init:function(){this.dragSet={},this.dragSetCount=0,this._onMove=this._onStop=this._onKey=null},start:function(t,e){if(arguments.length<2)return!1;if(t||(t=window.event),t.target.tagName.match(/^(input|button|textarea|select|option.*|a|label)$/i)||t.target.classList.contains("input")||t.target.classList.contains("cmd"))return!1;var n,i,o;if("mousedown"==t.type)n=t,i={from:"mouse",elStart:t.target,key:"mouse"},"mouse"in this.dragSet&&this.onStop({type:"mouseup"});else{if("touchstart"!=t.type)return!1;o="touch-"+(n=t.targetTouches[0]).identifier,i={from:"touch",elStart:t.target,key:o},o in this.dragSet&&this.onStop({type:"touchend",changedTouches:[{identifier:n.identifier}]})}i.pageX0=n.pageX,i.pageY0=n.pageY,i.itemArray=[];var r,a,s=arguments.length;for(r=1;r<s;r++)"string"==typeof(a=arguments[r])&&(a=document.getElementById(a)),i.itemArray.push([a,parseInt(a.style.left)||0,parseInt(a.style.top)||0]);this.dragSet[i.key]=i,this.dragSetCount++,1===this.dragSetCount&&(document.addEventListener("mousemove",this._onMove||(this._onMove=this.onMove.bind(this)),!1),document.addEventListener("mouseup",this._onStop||(this._onStop=this.onStop.bind(this)),!1),document.addEventListener("keyup",this._onKey||(this._onKey=this.onKey.bind(this)),!1),document.addEventListener("touchmove",this._onMove,{passive:!1}),document.addEventListener("touchend",this._onStop,!1)),this.moveChanged=!1},getEventList:function(t){var e=[],n=t.type.slice(0,5);if("mouse"==n)e.push(t,this.dragSet.mouse);else{if("touch"!=n)return null;var i,o,r="touchend"==t.type?t.changedTouches:t.targetTouches,a=r.length;for(i=0;i<a;i++)(o="touch-"+r[i].identifier)in this.dragSet&&e.push(r[i],this.dragSet[o])}return e.length>0?e:null},onStop:function(t){if(!1===t)for(var e in this.dragSet){var n,i,o=(a=this.dragSet[e]).itemArray.length;for(n=0;n<o;n++)(i=a.itemArray[n])[0].style.left=i[1]+"px",i[0].style.top=i[2]+"px"}if(t){var r=this.getEventList(t);if(!r)return!1;var a,s=r.length;for(e=0;e<s;e+=2)(a=r[e+1]).key in this.dragSet&&(delete this.dragSet[a.key],this.dragSetCount--)}else this.dragSet={},this.dragSetCount=0;this.dragSetCount<1&&(document.removeEventListener("mousemove",this._onMove,!1),document.removeEventListener("mouseup",this._onStop,!1),document.removeEventListener("keyup",this._onKey,!1),document.removeEventListener("touchmove",this._onMove,{passive:!1}),document.removeEventListener("touchend",this._onStop,!1)),this.dragSetCount<0&&(console.error("dragSetCount abnormal, "+this.dragSetCount),this.onStop(!1),this.dragSetCount=0)},onFirstMove:null,onMove:function(t){var e=this.getEventList(t);if(!e)return!1;var n,i,o,r=e.length;for(n=0;n<r;n+=2){i=e[n+1];var a=e[n].pageX-i.pageX0,s=e[n].pageY-i.pageY0;(a||s)&&(o=1);var l,c,u=i.itemArray.length;for(l=0;l<u;l++)(c=i.itemArray[l])[0].style.left=c[1]+a+"px",c[0].style.top=c[2]+s+"px"}"touchmove"==t.type&&t.preventDefault(),!this.moveChanged&&o&&(this.moveChanged=!0,this.onFirstMove&&this.onFirstMove(t))},onKey:function(t){27==(t.keyCode||t.which||t.charCode)?this.onStop(!1):this.onStop()},startListener:function(){i.start(arguments[0],this)},startListenerForParent:function(){i.start(arguments[0],this.parentNode)}};i.init(),e.exports=n=i,n.class=function(t){var e=Object.create(i);if(t)for(var n in t)e[n]=t[n];return e.init(),e}},{}],14:[function(t,e,n){var i=0;e.exports=n=function(t,e){if(t){if("string"==typeof t)return t;if(t.id)return t.id}var n;for(e||(e="ele-id-");document.getElementById(n=e+ ++i););return t?t.id=n:n},n.from=function(t){return document.getElementById(t)}},{}],15:[function(t,e,n){e.exports=function(t,e){var n="string"==typeof t?t:t.id||"",i=n.match(/\D(\d+)(\D*)$/);return i&&document.getElementById(n.slice(0,1-i[0].length)+(parseInt(i[1])+e)+i[2])}},{}],16:[function(t,e,n){e.exports=function(t,e,n){return void 0!==e&&(t+=", "+JSON.stringify(e)),void 0!==n&&(t+=", "+JSON.stringify(n)),t instanceof Error?t:Error(t)}},{}],17:[function(t,e,n){e.exports=function(t){return"string"==typeof t?document.getElementById(t):t}},{}],18:[function(t,e,n){e.exports=function(t,e){if(e||(e=window.location.search),"function"==typeof URLSearchParams)return new URLSearchParams(e).get(t);var n=e.match(new RegExp("(^|\\?|\\&)"+t+"\\=([^\\&]*)($|\\&)"));return n&&n[2]}},{}],19:[function(t,e,n){var i=t(5),o=t(11);i(t(20),"ht-common-css"),i(t(21),"ht-entity-css"),e.exports=o.bind("ht")},{11:11,20:20,21:21,5:5}],20:[function(t,e,n){e.exports=".ht.selected{background:#e6e6fa}.ht.active{background:#0f0}.ht.unselectable{user-select:none}.ht.hover:hover{background:#eee}.ht.cmd{color:green;text-decoration:underline;cursor:pointer;font-size:9pt}.ht.cmd:hover{background:#eee}"},{}],21:[function(t,e,n){e.exports=".ht.entity{display:inline-block;width:1em;height:1em;font-family:monospace;cursor:pointer;vertical-align:middle;text-align:center;line-height:100%;overflow:hidden;box-sizing:content-box;padding:1px;margin:1px}.ht.entity.btn,.ht.entity.button{padding:2px;border:1px solid gray;border-radius:20%}.ht.entity.btn:hover,.ht.entity.button:hover,.ht.entity:hover{background:#eee}"},{}],22:[function(t,e,n){"use strict";var i=t(40),o=t(37),r=t(50),a=t(56),s=t(19),l=t(13),c=t(52);e.exports={tab_control_tool:c,tab:c,radio_group:o,radioGroup:o,show_log:i,showLog:i,drag_object:l,drag:l,simple_popup_tool:r,popup:r,showPopup:r.show,hidePopup:r.hide,showPopupHtml:r.showHtml,alert:r.alert,confirm:r.confirm,confirmYnc:r.confirmYnc,prompt:r.prompt,selectRadioList:r.selectRadioList,selectCheckboxList:r.selectCheckboxList,selectButtonList:r.selectButtonList,width_splitter:a,widthSplitter:a,htm_tool_css:s,setClass:s,setElClass:s.setEl}},{13:13,19:19,37:37,40:40,50:50,52:52,56:56}],23:[function(t,e,n){var i=function(t,e,n,i){return"string"==typeof t&&(t=document.getElementById(t)),n instanceof Element?t.insertAdjacentElement(e,n):("beforebegin"==e?o=t.previousSibling:"afterbegin"==e?o=t.firstChild:"beforeend"==e?o=t.lastChild:"afterend"==e&&(o=t.nextSibling),i?t.insertAdjacentText(e,n):t.insertAdjacentHTML(e,n),"beforebegin"==e?(o=o?o.nextSibling:t.parentNode.firstChild)===t?null:o:"afterbegin"==e?t.firstChild===o?null:t.firstChild:"beforeend"==e?o?o.nextSibling:t.firstChild:"afterend"==e?t.nextSibling===o?null:t.nextSibling:void 0);var o};e.exports=n=i,n.prependOut=function(t,e,n){return i(t,"beforebegin",e,n)},n.prepend=function(t,e,n){return i(t,"afterbegin",e,n)},n.append=function(t,e,n){return i(t,"beforeend",e,n)},n.appendOut=function(t,e,n){return i(t,"afterend",e,n)}},{}],24:[function(t,e,n){var i={data:null,fromDataCallback:null,init:function(t){this.data={},this.fromDataCallback=t},add:function(t,e,n){var i,o=this.data[t];if(o||(o=this.data[t]={from:t,count:0,to:{},fromData:{}}),void 0===n||n in o.fromData||(o.fromData[n]=1,i=!0),o.to[e])i&&this.fromDataCallback&&this.fromDataCallback(n,o);else if(o.to[e]=1,o.count++,this.fromDataCallback)for(var r in o.fromData)this.fromDataCallback(r,o);return o}};n.class=function(t){var e=Object.create(i);return e.init(t),e}},{}],25:[function(t,e,n){e.exports=function(t,e,n){"string"==typeof e&&(e={attributes:!0,attributeFilter:[e],attributeOldValue:!0});var i=new MutationObserver((function(t){return n(t[t.length-1])}));return i.observe(t,e),i}},{}],26:[function(t,e,n){function i(t,e,n){var i=t;return e?(i={})[e]=t:"object"==typeof t&&null!==t||(i={},n?i[n]=t:i.raw_options=t),i}e.exports=n=i,n.cb=function(t,e,n,o){var r=i(t,n||"function"==typeof t&&void 0===e&&"cb",o);return e&&(r.cb=e),r}},{}],27:[function(t,e,n){var i=t(33).satisfy,o=t(34),r={data:null,top:null,loadPackageFunc:null,init:function(t,e,n){this.data={},this.top={path:e,name:t.name,pkg:t},this.data[t.name]=this.top,this.loadPackageFunc=n},isDirect:function(t){return t===this.top||!t.main&&t.path.replace(/\\/g,"/")==(this.top.path+"/node_modules/"+t.name).replace(/\\/g,"/")},isTop:function(t,e){return!(!t||!this.top)&&(t===this.top||t.path===this.top.path&&t.pkg===this.top.pkg||!!e&&(o.samePath(t.path,this.top.path)&&JSON.stringify(t.pkg)===JSON.stringify(this.top.pkg)))},get:function(t,e){var n=this.data[t];return n?e?n.versionPkg[o.keyString(e)]:n:null},load:function(t,e,n,r){var a=this.data[e];if(a){if(n==a.pkg.version||i(a.pkg.version,n))return void r(null,a);for(var s,l,c=t.replace(/[\\\/]+$/,"");;){if((s=a.versionPkg[c+"/node_modules/"+e])&&i(s.pkg.version,n))return void r(null,s);if(!(l=o.dirPart(c,!0))||l.length>=c.length)break;c=l}}var u=this;this.loadPackageFunc(t,e,(function(t,n){if(!t){var i={name:e,path:n.path,pkg:n.pkg};return u.isDirect(i)?(i.versionPkg={},u.data[e]=i,void r(null,i)):a?(a.versionPkg[o.keyString(i.path)]=i,i.main=a,void r(null,i)):void u.loadPackageFunc(u.top.path,e,(function(t,n){if(!t){var a={name:e,path:n.path,pkg:n.pkg,versionPkg:{}};a.versionPkg[o.keyString(i.path)]=i,u.data[e]=a,i.main=a,r(null,i)}}))}}))}};n.class=function(t,e,n){var i=Object.create(r);return i.init(t,e,n),i}},{33:33,34:34}],28:[function(t,e,n){e.exports='<div name=list style="width:15em;\n\t\tposition:absolute;left:0px;top:0em;bottom:0px;\n\t\tborder-right:1px solid gray;\n\t\twhite-space:nowrap;overflow:auto;padding:0.5em"></div><div name=splitter style=position:absolute;top:0px;bottom:0px;left:16em;width:8px;z-index:1></div><div name=info style=position:absolute;left:16em;top:0px;right:0px;bottom:0px;padding:0.5em></div>'},{}],29:[function(t,e,n){var i=t(56),o=t(54),r=t(7),a=t(30),s=t(32);t(19);var l={config:{htmlText:t(28),init:"init"},packageDataset:null,treeview:null,init:function(t){var e=this,n=this.nme("splitter");o.left(n),n.style.left=Math.round(parseInt(n.style.left)-n.offsetWidth/2)+"px",i(n,this.nme(".list"),null,[this.nme("info")],null,50),this.treeview=new s.class(this.nme(".list")),this.treeview.nameClickCallback=function(t,n){t||e.updateInfo(n)}},localLabel:null,localLabelTitle:null,updateInfo:function(t){var e=this.packageDataset.isDirect(t),n={packageDir:t.path,rootPackageDir:this.packageDataset.top.path,packageDirUrl:("/"+this.packageDataset.top.name+"/*/"+t.path.slice(this.packageDataset.top.path.length)+"/").replace(/\\/g,"/").replace(/\/+/g,"/"),localLabel:this.localLabel,localLabelTitle:this.localLabelTitle,versionStyle:e?"":"color:red;"};this.nme("info").innerHTML="<div style='overflow:auto;height:100%;white-space:nowrap;'>"+a(t.pkg,n)+"</div>"},updateView:function(t){this.packageDataset=t,this.treeview.updateView(t),this.updateInfo(this.packageDataset.top)}};n.class=function(t,e){return r(t,Object.create(l),null,e)}},{19:19,28:28,30:30,32:32,54:54,56:56,7:7}],30:[function(t,e,n){function i(t,e){return'<span style="'+(e||"color:gray;display:inline-block;min-width:6em;margin-right:0.5em;")+'">'+t+": </span>"}e.exports=function(t,e){e||(e={});var n=e.nameStyle,o=e.localLabel?"<span class='local-label'  style='margin-left:1em;font-size:9pt;color:gray;font-style:italic;cursor:pointer;' "+(e.localLabelTitle?" title='"+e.localLabelTitle+"'":"")+">"+e.localLabel+"</span>":"",r=[];if(r[r.length]=i("name",n)+"<a target='_blank' href='https://www.npmjs.com/package/"+t.name+"'>"+t.name+"</a>",r[r.length]=i("version",n)+'<span style="'+(e.versionStyle||"")+'">'+t.version+"</span>",r[r.length]=i("description",n)+(t.description||""),t.main&&(e.packageDirUrl?r[r.length]=i("main",n)+"<a target='_blank' href='"+e.packageDirUrl+t.main+"'>"+t.main+"</a>"+o:r[r.length]=i("main",n)+t.main),t.author&&(r[r.length]=i("author",n)+(t.author.name||t.author)),r[r.length]=i("license",n)+(t.license||""),t.homepage&&(r[r.length]=i("homepage",n)+"<a target='_blank' href='"+t.homepage+"'>"+t.homepage+"</a>"),t.bugs){var a=t.bugs.url;r[r.length]=i("bugs",n)+"<a target='_blank' href='"+a+"'>"+a+"</a>"}if(t.repository){if("git"==t.repository.type){if((s=t.repository.url).match(/^git\+https?\:/)){a=s.slice(4);s="git+<a target='_blank' href='"+a+"'>"+a+"</a>"}}else var s=JSON.stringify(t.repository);r[r.length]=i("repository",n)+s}if(t.keywords&&(r[r.length]=i("keywords",n)+t.keywords.map((function(t){return"<a target='_blank' href='https://www.npmjs.com/search?q=keywords:"+t+"'>"+t+"</a> "})).join("")),e.packageDir){r[r.length]="";var l=e.packageDir.replace(/[\\\/]/g,"/").replace(/\/+$/,""),c=e.rootPackageDir?e.rootPackageDir.replace(/[\\\/]/g,"/").replace(/\/+$/,""):l,u=l==c||l==c+"/node_modules/"+t.name?l:l.slice(0,c.length+14)+"<span style='color:orange'>"+l.slice(c.length+14)+"</span>";e.packageDirUrl?r[r.length]=i("path",n)+"<a target='_blank' style='color:gray;' href='"+e.packageDirUrl+"'>"+u+"</a>"+o:r[r.length]=i("path",n)+"<span style='color:gray;'>"+u+"</span>"}return r.join("<br>")}},{}],31:[function(t,e,n){var i=function(t){return t.dependencies&&Object.keys(t.dependencies).length>0||t.devDependencies&&Object.keys(t.devDependencies).length>0};e.exports={hasDependencies:function(t,e){if(!e)return t.dependencies&&Object.keys(t.dependencies).length>0;var n=t[e+"Dependencies"];return n&&Object.keys(n).length>0},hasAnyDependencies:i,anyDependencies:i}},{}],32:[function(t,e,n){var i=t(31),o=t(24),r=t(55),a=t(34),s=t(14);t(19);var l=t(33).satisfy,c={eleId:null,packageDataset:null,packageDependent:null,lastSelected:null,init:function(t,e){this.eleId=s(t),t.onclick=this._onClickPackageList||(this._onClickPackageList=this.onClickPackageList.bind(this)),e&&this.updateView(e)},updateVersionAndChildren:function(t,e){t instanceof Array||(t=[t]);var n,o,a,s,c=e.version,u=t.length;for(n=0;n<u;n++)o=r.getNode(t[n]),a=r.nodePart(o,"pkg-version"),s=l(c,a.textContent),a.style.color=s?"black":"red",a.title=s?"":"top version is "+c,s&&(i.hasAnyDependencies(e)||r.setToExpandState(o,"disable"))},loadFromNode:function(t,e){var n=r.nodeName(t),o=r.nodePart(t,"pkg-version"),s=this,l=n.textContent,c=!this.packageDataset.get(l);this.packageDataset.load(this.getParentPath(t),l,o.textContent,(function(n,o){if(n)e(n,o);else{t.setAttribute("pkg-path",a.keyString(o.path));var u=s.packageDataset.get(l);if(s.updateVersionAndChildren(t,u.pkg),c){var p=s.packageDependent.data[l];p&&s.updateVersionAndChildren(Object.keys(p.fromData),u.pkg)}i.anyDependencies(o.pkg)?r.nodeChildren(t)||s.addPackageChildren(t,o,!1,!0):(r.setToExpandState(t,"disable"),r.nodeToExpand(t).classList.remove("cmd")),e(n,o)}}))},onClickPackageList:function(t){var e=t.target;if(e.classList.contains("cmd")){var n=this;if(e.classList.contains("tree-to-expand")){var o=r.nodeChildren(e.parentNode);if(o){var a="none"==o.style.display;r.setToExpandState(e.parentNode,!a),o.style.display=a?"":"none"}else{var s=r.getNode(e);this.loadFromNode(s,(function(t,e){t||i.anyDependencies(e.pkg)&&(r.setToExpandState(s,!1),r.nodeChildren(s).style.display="")}))}}else if(e.classList.contains("pkg-dev")){s=r.getNode(e.parentNode.parentNode);var l=r.nodeName(s);this.addPackageChildren(s,this.packageDataset.get(l.textContent),!0)}else if(e.classList.contains("tree-name")){this.lastSelected&&this.lastSelected.classList.remove("selected"),e.classList.add("selected"),this.lastSelected=e;s=r.getNode(e);this.loadFromNode(s,(function(t,e){t||n.nameClickCallback&&n.nameClickCallback(t,e)}))}else;}},_onClickPackageList:null,nameClickCallback:null,getParentPath:function(t){var e=r.getNode(t.parentNode);return e&&e.getAttribute("pkg-path")},formatContent:function(t,e,n,o){var r=this.packageDataset.get(t),a=r?l(r.pkg.version,e):null;n&&r&&a&&!i.hasAnyDependencies(r.pkg)&&(n=!1);var s=[];s[s.length]="<span class='ht cmd tree-to-expand"+(n?"":" disabled")+"' style='padding:0em 0.5em;text-decoration:none;font-family:monospace;font-size:9pt;'>"+(n?"+":".")+"</span>",s[s.length]="<span class='ht cmd tree-name'"+(o?" style='color:black;'":"")+">"+t+"</span>";var c=r?a?"black":"red":"gray",u=r?a?"":" title='top version is "+r.pkg.version+"'":"";return s[s.length]="<span class='pkg-version' style='margin-left:0.5em;font-size:9pt;color:"+c+";'"+u+">"+e+"</span>",s[s.length]="<span class='pkg-dependent' style='margin-left:1em;font-size:9pt;'></span>",s.join("")},addDependItems:function(t,e,n){var i,o,a,l=r.nodeName(t).textContent;for(i in e)o=this.formatContent(i,e[i],!0,n),a=r.addChild(t,{content:o},!0),this.packageDependent.add(i,l,s(r.nodePart(a,"pkg-dependent")))},addPackageChildren:function(t,e,n,o){var a=e.pkg;if(i.anyDependencies(a)){var s=r.nodePart(t,"tree-children",!0);if(s&&o&&(s.style.display="none"),n)s.lastChild&&s.lastChild.classList.contains("tree-delay")&&(s.removeChild(s.lastChild),this.addDependItems(s,a.devDependencies,!0));else if(a.dependencies&&this.addDependItems(s,a.dependencies),i.hasDependencies(a,"dev")){r.addChild(s,{html:"<div class='tree-delay'><span class='ht cmd pkg-dev' style='color:gray;margin-left:1em;text-decoration:none;'>... devDependencies</span></div>"},!0)}}else r.setToExpandState(t,"disable")},formatDependent:function(t,e){if(!(e.count<2)){var n="string"==typeof t?document.getElementById(t):t;n.title="Dependents count: "+e.count+"\n"+Object.keys(e.to).join(", "),n.textContent="["+e.count+"]"}},updateView:function(t){var e=document.getElementById(this.eleId);this.packageDataset=t,this.packageDependent=new o.class(this.formatDependent),this.lastSelected=null,e.innerHTML="";var n=t.top,i=n.pkg,s=r.addChild(e,{contentHtml:this.formatContent(i.name,i.version)},!0);s.setAttribute("pkg-path",a.keyString(n.path)),this.addPackageChildren(s,n),setTimeout((function(){e.scrollTop=0}),0)}};n.class=function(t,e){var n=Object.create(c);return n.init(t,e),n}},{14:14,19:19,24:24,31:31,33:33,34:34,55:55}],33:[function(t,e,n){var i=function(t){var e=(t=t.replace(/^(v|\=)/i,"")).match(/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(.*)$/);if(!e)return null;var n=[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])];return e[4]&&(n[3]=e[4]),n},o=/^(x|X|\*|0|[1-9]\d*)(?:\.(x|X|\*|0|[1-9]\d*))?(?:\.(x|X|\*|0|[1-9]\d*))?(.*)/,r=/^(\>\=|\<\=|\<|\>|\=|\~|\^)/,a=function(t){return t&&("x"===t||"X"===t||"*"===t)},s=function(t){var e=[,,,,,],n=[,,,,,];return a(t[0])?(e[0]=e[1]=e[2]=0,n[0]=n[1]=n[2]=Number.MAX_VALUE):(e[0]=n[0]=parseInt(t[0]),!t[1]||a(t[1])?(e[1]=e[2]=0,n[1]=n[2]=Number.MAX_VALUE):(e[1]=n[1]=parseInt(t[1]),!t[2]||a(t[2])?(e[2]=0,n[2]=Number.MAX_VALUE):e[2]=n[2]=parseInt(t[2]))),[e,n]},l=function(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1]>e[1]?1:t[1]<e[1]?-1:t[2]>e[2]?1:t[2]<e[2]?-1:0},c=function(t,e){e?t[2]!==Number.MAX_VALUE&&(t[4]=!0):delete t[4]},u=function(t,e,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],void 0!==n&&c(e,n),e},p=function(t,e,n){var i=l(e,n);if("<"===t)i<=0&&(c(n,!1),i<0&&u(e,n));else if("<="===t)i<0&&u(e,n,!0);else if(">"===t)i>=0&&(c(n,!1),i>0&&u(e,n));else{if(">="!==t)throw"unkonwn intersect op, "+t;i>0&&u(e,n,!0)}},d=function(t){var e=t[0];return e[4]||(c(e,!0),e[2]++),(e=t[1])[0]===Number.MAX_VALUE||(e[4]?(c(e,!1),e[2]++):(e[2]===Number.MAX_VALUE&&(e[2]=0,e[1]++),e[1]===Number.MAX_VALUE&&(e[1]=0,e[0]++))),t},h=function(t){var e,n,i,a,l,u,h,f;if(t.indexOf(" - ")>=0)return(n=(e=t.split(/\s+\-\s+/))[0].match(o))?(a=s([n[1],n[2],n[3]])[0],c(a,!0),(n=e[1].match(o))?(l=s([n[1],n[2],n[3]])[1],c(l,!0),d([a,l])):null):null;for(e=t.replace(/(^\s+|\s+$)/g,"").split(/\s+/),a=[0,0,0,,!0],l=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,,,],h=e.length,u=0;u<h;u++){if(!(n=((f=(n=e[u].match(r))&&n[0])?e[u].slice(f.length):e[u]).match(o)))return null;if(i=s([n[1],n[2],n[3]]),"<"===f||"<="===f)p(f,i[0],l);else if(">"===f||">="===f)p(f,i[1],a);else if("="!==f&&f)if("~"===f)i[1][1]!==Number.MAX_VALUE?(i[1][2]=Number.MAX_VALUE,c(i[1],!1)):(i[1][1]=i[1][2]=Number.MAX_VALUE,c(i[1],!1)),p(">=",i[0],a),p("<=",i[1],l);else{if("^"!==f)throw"unkonwn prefix, "+f;i[1][0]!==Number.MAX_VALUE&&(i[1][0]>0?(i[1][1]=i[1][2]=Number.MAX_VALUE,c(i[1],!1)):i[1][1]!==Number.MAX_VALUE&&i[1][1]>0&&(i[1][2]=Number.MAX_VALUE,c(i[1],!1))),p(">=",i[0],a),p("<=",i[1],l)}else p(">=",i[0],a),p("<=",i[1],l)}return d([a,l])},f=function(t){if("string"!=typeof t)return null;""===t&&(t="*");var e,n,i=t.split(/\s*\|\|\s*/),o=i.length,r=[];for(e=0;e<o;e++){if(!(n=h(i[e])))return console.log("parseRange fail at: "+i[e]),null;r[e]=n}return r};e.exports={INDEX_MAJOR:0,INDEX_MINOR:1,INDEX_PATCH:2,INDEX_TAIL:3,INDEX_INCLUDED:4,RANGE_MIN:0,RANGE_MAX:1,parseVersion:i,parseRange:f,normalizeRangePair:d,normalize:d,satisfy:function(t,e){if("string"==typeof t&&!(t=i(t)))return null;if("string"==typeof e&&!(e=f(e)))return null;var n,o,r,a=e.length;for(n=0;n<a;n++)if(o=e[n],!((r=l(o[0],t))>0||0==r&&!o[0][4]||(r=l(t,o[1]))>0||0==r&&!o[1][4]))return!0;return!1},sameRange:function(t,e){return("string"!=typeof t||(t=f(t)))&&("string"!=typeof e||(e=f(e)))?JSON.stringify(t)===JSON.stringify(e):null}}},{}],34:[function(t,e,n){var i=function(t,e){return(e?t.toLowerCase():t).replace(/[\\\/]+/g,"/").replace(/\/+$/,"")};e.exports={dirPart:function(t,e){var n=t.replace(/[^\\\/]*[\\\/]*$/,"");return e?n.replace(/[\\\/]+$/,""):n},normalize:function(t){t=(t=t.replace(/([\\\/])([\\\/]+)/g,"$1")).replace(/(^|[\\\/])(\.([\\\/]|$))+/g,"$1");for(var e="";t&&e!=t;)e=t,t=t.replace(/(^|[\\\/])([^\.\\\/]|\.+[^\.\\\/])[^\\\/]*[\\\/]\.\.([\\\/]|$)/,"$1");return t},keyString:i,samePath:function(t,e,n){return i(t,n)===i(e,n)}}},{}],35:[function(t,e,n){e.exports=function(t,e,n,i,o,r){"string"==typeof t&&(t=document.getElementById(t));var a=(e||"")+"["+n+(null!=i?"='"+(""+i).replace(/([\[\]\<\>\'\"\:\\\/ \t])/g,"\\$1")+"'":"")+"]"+(o||"");return r?t.querySelectorAll(a):t.querySelector(a)}},{}],36:[function(t,e,n){e.exports=function(t,e,n){"string"==typeof e&&(e.indexOf(".")>=0?(void 0===n&&(n=!0),e=e.replace(/^\./,"").split(".")):e=e.split(/\s+/));var i,o=e.length,r=[];for(i=0;i<o;i++)r[r.length]="[name='"+e[i].replace(/(\<\>\'\"\:)/g,"\\$1")+"']";if(t="string"==typeof t?document.getElementById(t):t,!n)return t.querySelector(r.join(" "));var a,s,l=t.querySelectorAll(r.join(" ")),c=l.length;for(a=0;a<c;a++){for(s=l[a].parentNode,i=o-2;i>=0;i--){for(;!s.hasAttribute("name");)s=s.parentNode;if(s.getAttribute("name")!=e[i])break;s=s.parentNode}if(!(i>=0))for(;;){if(s===t)return l[a];if(s.hasAttribute("name"))break;s=s.parentNode}}return null}},{}],37:[function(t,e,n){var i=t(17),o=t(14),r=function(t){return"INPUT"==(t=i(t)).tagName.toUpperCase()&&"radio"==t.type?t:t.querySelectorAll("input[type='radio']")},a=function(){this.checked=!0;var t=this.getAttribute("ht-ui-radio-group"),e=i(t),n=e.getAttribute("ht-ui-radio-group-last"),r=o(this);n!=r&&(n&&(i(n).checked=!1),e.setAttribute("ht-ui-radio-group-last",r))},s=function(t,e,n){t instanceof Array||(t=[t]),n||(n=t[0]);for(var s,l,c,u,p=o(i(n)),d=[],h=0;h<t.length;h++)for(l=r(t[h]),s=0;s<l.length;s++)c=l[s],u||(u=c),c.setAttribute("ht-ui-radio-group",p),c.addEventListener("click",a),c.checked=c.getAttribute("value")===e,c.checked&&(u=c),d.push(o(c));return i(n).setAttribute("ht-ui-radio-id-list",d.join(",")),a.apply(u),p};function l(t){var e=i(t);return e.getAttribute("ht-ui-radio-group-last")?e:(t=r(e)[0].getAttribute("ht-ui-radio-group"))?i(t):null}e.exports=n=s,n.init=s,n.getValue=function(t){var e=l(t);if(!e)return null;var n=e.getAttribute("ht-ui-radio-group-last");return n?i(n).getAttribute("value"):null},n.setValue=function(t,e){var n=l(t);if(!n)return null;var o,r,s=n.getAttribute("ht-ui-radio-id-list").split(","),c=s.length;for(o=0;o<c;o++)if((r=i(s[o])).getAttribute("value")==e){a.apply(r);break}}},{14:14,17:17}],38:[function(t,e,n){var i=function(t,e){var n,o=arguments[2]||0;if(!(o>=0&&o<32))return null;if(n=Object.getOwnPropertyDescriptor(t,e))return n;var r=Object.getPrototypeOf(t);return r&&t!==r?i(r,e,o+1):null},o=function(t){return t||0===t||""===t||!1===t};e.exports={getPropertyDescriptor:i,enclosePropertyDescriptor:function(t,e,n,o,r){"boolean"==typeof r&&(r={replaceGetter:r});var a=r&&r.replaceGetter;r=null;var s=i(t,e)||{},l={configurable:!0,enumerable:!0},c=s.set;c?l.set=n?function(t){c.call(this,t),n.call(this,t)}:c:n&&(l.set=n),!s.get||o&&a?o&&(l.get=o):(l.get=s.get,o=null),t.hasOwnProperty(e)&&delete t[e],Object.defineProperty(t,e,l)},findWithFilter:function(t,e){if(t||(t=o),t(e))return e;var n,i=arguments.length;for(n=2;n<i;n++)if(t(e=arguments[n]))return e},mapValue:function(t,e){if(!t)return e;var n="function"==typeof t?t(e):t[e];return void 0===n?e:n}}},{}],39:[function(t,e,n){e.exports='<div style="position:fixed;right:0.5em;bottom:0.5em;width:auto;height:auto;max-width:500px;background:white;border:1px\n\tsolid gray;font-size:9pt;padding:0.5em;cursor:default"><span style=display:none;padding:0em;float:right><span name=pin class="ht cmd" style="text-decoration:none;padding:0em 0.3em" title="Pin log popup">&LeftTee;</span><span name=minimize class="ht cmd" style="text-decoration:none;padding:0em 0.3em" title=Minimize>&minus;</span><span name=close class="ht cmd" style="text-decoration:none;padding:0em 0.3em" title=Close>&times;</span> </span><b>Log</b><div name=content style=display:none;margin-top:0.1em></div></div>'},{}],40:[function(t,e,n){var i=t(14),o=t(53),r=t(36),a=t(23);t(19);var s=null,l=null,c=function(){if(this.onclick){var t=parseInt(this.getAttribute("repeatCount")),e=this.title.split("\n");this.innerHTML=e[e.length-1]+(t>1?" <b>("+t+")</b>":""),this.style.color="green",this.onclick=null,this.className="",1==t&&(this.title="")}},u=function(e){var n=document.getElementById(l);n||((n=a.append(document.body,t(39))).addEventListener("click",(function(){u()})),r(n,"close").addEventListener("click",(function(){setTimeout((function(){u(!1)}),0)})),r(n,"minimize").addEventListener("click",(function(){setTimeout((function(){u(null)}),0)})),r(n,"pin").addEventListener("click",(function(){this.style.background?(this.style.background="",setTimeout((function(){u()}),0)):this.style.background="lime"})),window.parent!==window&&(n.style.bottom=.75+Math.random()+"em"),l=i(n));var p=r(n,"content"),d=r(n,"close");if(n.style.display="",e){var h=o.toString19(),f=p.lastChild;if(f&&f.querySelector("span:nth-child(2)").textContent==e){var m=f.querySelector("span"),g=parseInt(m.getAttribute("repeatCount"))+1;m.setAttribute("repeatCount",g);var b=(m.title||m.textContent).split("\n");for(b[b.length]=h;b.length>16;)b.shift();m.title=(g>b.length?"...\n":"")+b.join("\n"),m.innerHTML=(m.onclick?h.slice(-8):h)+" <b>("+g+")</b>"}else for((f=a.append(p,"<div>* <span class='ht cmd' title='"+h+"' repeatCount='1'>"+h.slice(-8)+"</span> <span></span></div>")).querySelector("span").onclick=c,f.querySelector("span:nth-child(2)").textContent=e;p.childNodes.length>16;)p.removeChild(p.firstChild);p.style.display=d.parentNode.style.display=""}else null===e||!1===e?(p.style.display=d.parentNode.style.display="none",!1===e&&(n.style.display="none")):"none"==p.style.display&&p.childNodes.length>0&&(p.style.display=d.parentNode.style.display="");"none"!=p.style.display&&(s&&(clearTimeout(s),s=null),s=setTimeout((function(){r(n,"pin").style.background||(p.style.display=d.parentNode.style.display="none",s=null)}),5e3))};e.exports=u},{14:14,19:19,23:23,36:36,39:39,53:53}],41:[function(t,e,n){var i=t(14),o=t(36),r=t(19),a=t(35),s=t(23),l=t(43),c=function(){l.hide(this,o(this.parentNode.parentNode,".input").value)},u=function(){if(this.checked){var t=this.parentNode.parentNode,e=t.getAttribute("value"),n=a(t,"input","value",e);r.setEl("selected",this.parentNode,n&&n.parentNode),t.setAttribute("value",this.value)}},p=function(){var t=o(this.parentNode.parentNode,".input");l.hide(this,t.querySelector("input:checked").value)},d=function(){r(this.parentNode,this.checked?"selected":"",this.checked?"":"selected")},h=function(){var t,e=o(this.parentNode.parentNode,".input").querySelectorAll("input:checked"),n=[];for(t=0;t<e.length;t++)n[t]=e[t].value;l.hide(this,n)};e.exports={alert:function(e,n,i){var r=l.showHtml(t(44),n,i);return o(r,".message").innerHTML=e,o(r,".ok").addEventListener("click",l.closeListener),r},confirm:function(e,n,i){var r=l.showHtml(t(47),n,i);return o(r,".message").innerHTML=e,o(r,".ok").addEventListener("click",l.closeByNameListener),o(r,".cancel").addEventListener("click",l.closeListener),r},confirmYnc:function(e,n,i){var r=l.showHtml(t(46),n,i);return o(r,".message").innerHTML=e,o(r,".yes").addEventListener("click",l.closeByNameListener),o(r,".no").addEventListener("click",l.closeByNameListener),o(r,".cancel").addEventListener("click",l.closeListener),r},prompt:function(e,n,i,r){var a=l.showHtml(t(48),i,r);return o(a,".message").innerHTML=e,o(a,".ok").addEventListener("click",c),o(a,".cancel").addEventListener("click",l.closeListener),n&&(o(a,".input").value=n),a},selectRadioList:function(e,n,a,c,d){var h=l.showHtml(t(49),c,d);o(h,".message").innerHTML=e,o(h,".ok").addEventListener("click",p),o(h,".cancel").addEventListener("click",l.closeListener);var f=o(h,".input");a&&f.setAttribute("value",a),c&&c.maxHeight&&(f.style["max-height"]=c.maxHeight);var m,g,b,v,y,x=i(null,"ht-select-radio-"),k=n.length,w=!1;for(m=0;m<k;m++)(g=n[m])&&("-"!==g?(g instanceof Array||(g=[g,g]),b=s.append(f,"<label class='ht hover' style='width:100%;display:block;margin-bottom:1px;"+(w?"margin-top:1em;":"")+"'></label>"),w=!1,b.innerHTML=" "+g[1],(y=g[0]==a)&&r(b,"selected"),(v=s.prepend(b,"<input type='radio' name='"+x+"'></input> ")).value=g[0],y&&(v.checked=!0),v.addEventListener("change",u)):w=!0);return h},selectCheckboxList:function(e,n,i,a,c){var u=l.showHtml(t(49),a,c);o(u,".message").innerHTML=e,o(u,".ok").addEventListener("click",h),o(u,".cancel").addEventListener("click",l.closeListener),i&&"string"!=typeof i||(i=[i]);var p=o(u,".input");a&&a.maxHeight&&(p.style["max-height"]=a.maxHeight);var f,m,g,b,v,y=n.length,x=!1;for(f=0;f<y;f++)(m=n[f])&&("-"!==m?(m instanceof Array||(m=[m,m]),g=s.append(p,"<label class='ht hover' style='width:100%;display:block;margin-bottom:1px;"+(x?"margin-top:1em;":"")+"'></label>"),x=!1,g.innerHTML=" "+m[1],(v=i.indexOf(m[0])>=0)&&r(g,"selected"),(b=s.prepend(g,"<input type='checkbox'></input> ")).value=m[0],v&&(b.checked=!0),b.addEventListener("change",d)):x=!0);return u},selectButtonList:function(e,n,i,r){var a=l.showHtml(t(45),i,r);o(a,".message").innerHTML=e;var c=o(a,".input");i&&i.maxHeight&&(c.style["max-height"]=i.maxHeight);var u,p,d,h=n.length,f=!1;for(u=0;u<h;u++)(p=n[u])&&("-"!==p?(p instanceof Array||(p=[p,p]),d=s.append(c,"<button style='width:100%;display:block;margin-bottom:0.5em;"+(f?"margin-top:1em;":"")+"'></button>"),f=!1,d.innerHTML=p[1],d.setAttribute("name",p[0]),d.addEventListener("click",l.closeByNameListener)):f=!0);return(d=s.append(c,"<button style='width:100%;display:block;margin-bottom:1px;margin-top:1em;'>Cancel</button>")).addEventListener("click",l.closeListener),a}}},{14:14,19:19,23:23,35:35,36:36,43:43,44:44,45:45,46:46,47:47,48:48,49:49}],42:[function(t,e,n){e.exports=".ht.popup{position:fixed;left:0;top:0;right:0;bottom:0;text-align:center}.ht.popup-back{position:absolute;left:0;top:0;right:0;bottom:0;background:#eee;opacity:.5}.ht.popup-body{display:inline-block;position:relative;margin-top:10%;background:#fff;border:1px solid gray;border-radius:.6em;padding:.5em;box-shadow:0 0 30px gray;text-align:left;overflow:auto}.ht.popup-modal{border-radius:0}.ht.popup-group{border:1px solid #ccc;padding:.2em;max-height:10em;overflow:auto;max-width:500px}"},{}],43:[function(t,e,n){var i=t(17),o=t(5),r=t(26),a=t(23),s=t(19),l=t(13),c=null,u=function(){this.parentNode.querySelector(".ht.popup-body").classList.contains("popup-modal")||f(this)},p=function(){f(this)},d=function(t,e){for(var n=this;n&&!n.classList.contains("popup-body");)n=n.parentNode;if(n)if("absolute"==n.style.position){n.style.position="relative",n.style.marginTop=null;var i=n.getAttribute("saveLeftTop");i?(i=i.split(","),n.style.left=i[0],n.style.top=i[1]):n.style.left=n.style.top="auto",n.style.bottom=n.style.right="auto",this.style.background=""}else e||(n.style.position="absolute",n.style.marginTop="0",n.setAttribute("saveLeftTop",n.style.left?n.style.left+","+n.style.top:""),n.style.left=n.style.top=n.style.bottom=n.style.right="16px",this.style.background="lime",this.style.backgroundClip="content-box");else console.error("top ht.popup-body unfound")},h=function(e,n,h){for(n=r.cb(n,h,null,"modal"),c||(c=[],o(t(42))),e=i(e);c.length>0&&"none"==c[c.length-1][0].style.display;)c.pop();var f,m=c.length;for(f=0;f<m;f++)if(c[f][0]===e)return void console.error("fail to re-open popup, "+(e.id||""));var g=e.querySelector(".ht.popup-body");if(g){if(e.classList.contains("popup")||s(e,["ht","popup"]),!e.querySelector(".ht.popup-back"))a.prepend(e,"<div class='ht popup-back'></div>").addEventListener("click",u);var b,v=g.querySelector("span[name='ht-popup-close']");v?b=v.parentNode:(b=a.prepend(g,"<span style='float:right;'></span>"),(v=a.prepend(b,"<span name='ht-popup-close' style='text-decoration:none;padding:0em 0.3em;' class='ht cmd' title='Close'>x</span>")).addEventListener("click",p));var y=b.querySelector("span[name='ht-popup-max']");n.maximizeButton||n.maximized?(y?y.style.display="":(y=a.prepend(b,"<span name='ht-popup-max' style='text-decoration:none;padding:0em 0.3em;' class='ht cmd' title='Maximize'>&and;</span>")).addEventListener("click",d),n.maximized&&setTimeout((function(){d.call(y)}),0)):y&&(y.style.display="none");var x=n.dragMode;return"user-defined"===x||("none"===x?(g.onmousedown=g.ontouchstart=null,b.nextElementSibling&&(b.nextElementSibling.onmousedown=b.nextElementSibling.ontouchstart=null)):"first"===x?(g.onmousedown=g.ontouchstart=null,b.nextElementSibling&&(b.nextElementSibling.onmousedown=b.nextElementSibling.ontouchstart=l.startListenerForParent)):(g.onmousedown=g.ontouchstart=l.startListener,b.nextElementSibling&&(b.nextElementSibling.onmousedown=b.nextElementSibling.ontouchstart=null))),n.modal?(g.classList.add("popup-modal"),v.innerHTML="[&times;]",y&&(y.innerHTML="[&and;]")):(g.classList.remove("popup-modal"),v.innerHTML="(&times;)",y&&(y.innerHTML="(&and;)")),e.style.display="",e.style.zIndex=10+c.length,c.push([e,n]),e}console.error("popup-body unfound, "+(e.id||""))},f=function(t,e){for(t=i(t);t&&(!t.classList.contains("ht")||!t.classList.contains("popup"));)t=t.parentNode;if(t){var n,o,r=t.querySelector("span[name='ht-popup-max']");for(r&&d.call(r,null,!0),n=c.length-1;n>=0;n--){if(t===(o=c[n])[0])return t.style.display="none",c.pop(),void(o[1].cb&&o[1].cb.call(o[1].cbThis,null,e));if("none"!=o[0].style.display)break;c.pop()}if(c.length)for(console.error("abnormal popup, close all.");c.length>0;)c.pop()[0].style.display="none"}else console.error("top ht.popup unfound")};e.exports={show:h,hide:f,closeListener:p,closeByNameListener:function(){f(this,this.getAttribute("name"))},showHtml:function(t,e,n){var o,r,s;for(o=1;o<=10&&(s=i(r="ht-popup-html-"+o))&&"none"!=s.style.display;o++);if(!(o>10)){var l=i(r);return l||(l=a.append(document.body,"<div id='"+r+"' class='ht popup' style='display:none;'><div class='ht popup-body'></div></div>")),l.querySelector(".ht.popup-body").innerHTML=t,h(r,e,n)}console.error("popup-html stack overflow, max 10")}}},{13:13,17:17,19:19,23:23,26:26,42:42,5:5}],44:[function(t,e,n){e.exports="<div style=min-width:200px name=message></div><br><span style=float:right><button name=ok>OK</button></span>"},{}],45:[function(t,e,n){e.exports='<div style=min-width:200px name=message></div><br><div name=input class="ht input popup-group" value="" style=border:none></div>'},{}],46:[function(t,e,n){e.exports="<div style=min-width:200px name=message></div><br><span style=float:right><button name=yes>Yes</button> <button name=no>No</button> <button name=cancel>Cancel</button></span>"},{}],47:[function(t,e,n){e.exports="<div style=min-width:200px name=message></div><br><span style=float:right><button name=ok>OK</button> <button name=cancel>Cancel</button></span>"},{}],48:[function(t,e,n){e.exports="<div style=min-width:200px name=message></div><br><input type=text style=width:100%;box-sizing:border-box name=input><br><br><span style=float:right><button name=ok>OK</button> <button name=cancel>Cancel</button></span>"},{}],49:[function(t,e,n){e.exports='<div style=min-width:200px name=message></div><br><div name=input class="ht input popup-group" value=""></div><br><span style=float:right><button name=ok>OK</button> <button name=cancel>Cancel</button></span>'},{}],50:[function(t,e,n){var i=t(43),o=t(41);for(var r in n.popup=i,i)n[r]=i[r];for(var r in n.common=o,o)n[r]=o[r]},{41:41,43:43}],51:[function(t,e,n){e.exports=".ht.tab-group{border-bottom:1px solid #000;margin-bottom:.5em}.ht.tab-item{display:inline-block;padding:.2em .5em;margin-left:.5em;position:relative;left:0;top:0;background:#eee;cursor:pointer;border-left:1px solid #eee;border-top:0 solid #eee;border-right:1px solid #eee}.ht.tab-item.selected{background:#fff;top:1px;cursor:default;border-left:1px solid #000;border-top:1px solid #000;border-right:1px solid #000}"},{}],52:[function(t,e,n){var i=t(17),o=t(14),r=t(5),a=!1,s=function(){var t=this.getAttribute("ht-ui-tab-group"),e=o(this),n=this.getAttribute("ht-ui-tab-pannel"),r=i(t),a=r.getAttribute("ht-ui-tab-last-tab"),s=r.getAttribute("ht-ui-tab-last-view");a==e&&s==n||(a&&i(a).classList.remove("selected"),s&&(i(s).style.display="none"),i(e).classList.add("selected"),n&&(i(n).style.display=""),r.setAttribute("ht-ui-tab-last-tab",e),r.setAttribute("ht-ui-tab-last-view",n))},l=function(e,n,l){if(a||(a=!0,r(t(51),"ht-ui-tab-css")),e instanceof Array)e=Array.prototype.concat.apply([],e);else{var c=[];for(u in e)c.push(u,e[u]);e=c}l||(l=i(e[0]));var u,p,d,h=o(l,"tab-group-");for(u=0;u<e.length;u+=2)(p=i(e[u])).setAttribute("ht-ui-tab-group",h),p.addEventListener("click",s),p.classList.add("ht-tab-item"),u==n?p.classList.add("selected"):p.classList.remove("selected"),(d=i(e[u+1])).style.display=u==n?"":"none",p.setAttribute("ht-ui-tab-pannel",o(d));return n&&s.apply(i(n)),h};e.exports=n=l,n.init=l,n.getSelected=function(t){var e=i(t),n=e.getAttribute("ht-ui-tab-last-tab");if(!n){if(!(t=e.getAttribute("ht-ui-tab-group")))return null;if(!(n=i(t).getAttribute("ht-ui-tab-last-tab")))return null}return n}},{14:14,17:17,5:5,51:51}],53:[function(t,e,n){var i=864e5,o=function(t){return new Date(t.getTime()-6e4*t.getTimezoneOffset())},r=function(t){return new Date(t.getTime()+6e4*t.getTimezoneOffset())},a=function(t,e){return t||(t=new Date),(e?t.getUTCFullYear()+"-"+(t.getUTCMonth()+1)+"-"+t.getUTCDate()+" "+t.getUTCHours()+":"+t.getUTCMinutes()+":"+t.getUTCSeconds():t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()).replace(/\b(\d)\b/g,"0$1")},s=function(t,e){return t||(t=new Date),(e?t.getUTCHours()+":"+t.getUTCMinutes()+":"+t.getUTCSeconds():t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()).replace(/\b(\d)\b/g,"0$1")},l=function(t,e){return t||(t=new Date),(e?t.getUTCFullYear()+"-"+(t.getUTCMonth()+1)+"-"+t.getUTCDate():t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()).replace(/\b(\d)\b/g,"0$1")},c=function(t,e){return l(t,e).replace(/\D/g,"")},u=function(t){return new Date(t.getFullYear(),t.getMonth(),1,0,0,0)},p=function(t){return new Date(t.getFullYear(),t.getMonth()+1,1,0,0,0)},d=function(t,e,n,i){var o=e-t,r=o<0?"-":"";r&&(o=-o);var a,s=(o=Math.round(o/1e3))%60,l=(o=Math.round(o/60))%60,c=(o=(o-l)/60)%24,u=o=(o-c)/24;return i&&i.match(/^(gb|ch|zh|936|chinese)$/i)&&(a=r+u+""+c+""+l+""+s+""),a||(a=r+u+"d "+c+"h "+l+"m "+s+"s"),n?a.replace(/(\d+)(\D+)(?!$)/g,(function(t,e){return"0"===e?"":t})):a};e.exports={DAY_MILLISECONDS:i,utcToLocal:o,localToUtc:r,utcNow:function(){return r(new Date)},toString19:a,toString14:function(t,e){return a(t,e).replace(/\D/g,"")},toMdhms14:function(t,e){return a(t,e).slice(-14)},toString23:function(t,e){return t||(t=new Date),a(t)+"."+("00"+(e?t.getUTCMilliseconds():t.getMilliseconds())).slice(-3)},fromString14:function(t,e){var n=new Date(parseInt(t.substring(0,4),10),t.substring(4,6)-1,t.substring(6,8),t.substring(8,10),t.substring(10,12),t.substring(12,14));return e?o(n):n},fromYmd8:function(t){return new Date(parseInt(t.substring(0,4),10),t.substring(4,6)-1,t.substring(6,8),0,0,0)},fromString19:function(t,e){var n=t.split(/\D/),i=new Date(parseInt(n[0],10),n[1]-1,n[2],n[3],n[4],n[5]);return e?o(i):i},fromYmd10:function(t){var e=t.split(/\D/);return new Date(parseInt(e[0],10),e[1]-1,e[2],0,0,0)},fromString23:function(t,e){var n=t.split(/\D/),i=new Date(parseInt(n[0],10),n[1]-1,n[2],n[3],n[4],n[5],parseInt(n[6],10));return e?o(i):i},toHms8:s,toHm5:function(t,e){return s(t,e).slice(0,5)},toYmd10:l,toYmd8:c,toYmd6:function(t,e){return c(t,e).slice(-6)},monthStart:u,monthEnd:function(t){return new Date(t.getFullYear(),t.getMonth()+1,1,0,0,0,-1)},previousMonthStart:function(t){return new Date(t.getFullYear(),t.getMonth()-1,1,0,0,0)},previousMonthEnd:function(t){return new Date(t.getFullYear(),t.getMonth(),1,0,0,0,-1)},nextMonthStart:p,nextMonthEnd:function(t){return new Date(t.getFullYear(),t.getMonth()+2,1,0,0,0,-1)},monthDayNumber:function(t){return(p(t)-u(t))/i},diffDhms:d,diffDhm:function(t,e,n,i){var o=d(t,e,!1,i).replace(/\s*\d+(\D+)?$/,"");return n?o.replace(/(\d+)(\D+)(?!$)/g,(function(t,e){return"0"===e?"":t})):o}}},{}],54:[function(t,e,n){function i(t,e,n){"string"==typeof t&&(t=document.getElementById(t));var i=""+t.style[e];if(i.match(/^(\d+)px$/))return parseInt(i);var o=t[n];return t.style[e]=o+"px",o-=t[n]-o,t.style[e]=o+"px",o}function o(t,e,n,i,o){"string"==typeof t&&(t=document.getElementById(t));var r=""+t.style[e];if(r.match(/^(\d+)px$/))return parseInt(r);var a=t.offsetParent[n]-t[i]-t[o];return t.style[e]=a+"px",a-=t.offsetParent[n]-t[i]-t[o]-a,t.style[e]=a+"px",a}e.exports={toPxByOffset:i,toPxByParentOffset:o,width:function(t){return i(t,"width","offsetWidth")},left:function(t){return i(t,"left","offsetLeft")},height:function(t){return i(t,"height","offsetHeight")},top:function(t){return i(t,"top","offsetTop")},right:function(t){return o(t,"right","offsetWidth","offsetLeft","offsetWidth")},bottom:function(t){return o(t,"bottom","offsetHeight","offsetTop","offsetHeight")}}},{}],55:[function(t,e,n){var i=t(14),o=t(23),r="<div class='tree-children' style='padding-left:1em;'></div>",a="<span class='tree-to-expand' style='padding:0em 0.5em;text-decoration:none;font-family:monospace;'>+</span>",s=function(t){for("string"==typeof t&&(t=document.getElementById(t));t&&t.classList;){if(t.classList.contains("tree-node"))return t;t=t.parentNode}return null},l=function(t,e,n,l){t=s(t);var c="#"+i(t)+" > ."+e.replace(/^\.+/,""),u=t.querySelector(c);if(u&&u.parentNode===t)return u;if(!n)return null;if("boolean"==typeof n?n={createByDefault:n}:"string"==typeof n&&(n={contentHtml:n}),!("contentHtml"in n)&&"content"in n&&(n.contentHtml=n.content),n.html||(void 0!==n.contentHtml?n.html="<span class='"+e+"'>"+n.contentHtml+"</span>":n.html="tree-children"===e?r:"tree-to-expand"===e?a:"<span class='"+e+"'>"+e+"</span>"),"tree-children"===e)u=o.append(t,n.html);else if(l)u=o.prepend(t,n.html);else{var p=t.querySelector("#"+i(t)+" > .tree-children");u=p?o.prependOut(p,n.html):o.append(t,n.html)}return t.querySelector(c)||u.classList.add(e),u},c=function(t,e,n){return l(t,"tree-to-expand",e,void 0===n||n)};e.exports={defaultChildrenTemplate:r,defaultToExpandTemplate:a,getNode:s,nodePart:l,nodeChildren:function(t,e){return l(t,"tree-children",e)},nodeName:function(t,e){return l(t,"tree-name",e)},nodeToExpand:c,addChild:function(t,e,n){if(e?"string"==typeof e&&(e={name:e}):e={},!("contentHtml"in e)&&"content"in e&&(e.contentHtml=e.content),!e.html){var i=[];i[i.length]="<div class='tree-node'>",e.contentHtml?i[i.length]=e.contentHtml:(e.toExpand&&(i[i.length]=e.toExpandTemplate||a),i[i.length]="<span class='tree-name'>"+(e.name||"item")+"</span>"),i[i.length]="</div>",e.html=i.join("")}var r=n?t:l(t,"tree-children",e.childrenTemplate||!0),s=o.append(r,e.html);return s.classList.contains("tree-node")||s.classList.add("tree-node"),s},getToExpandState:function(t){var e=c(t);return e?e.classList.contains("tree-disable")?"disable":!e.classList.contains("tree-to-collapse"):null},setToExpandState:function(t,e,n){var i=l(t,"tree-to-expand",a,!0),o=i.classList.contains("tree-disable"),r=!i.classList.contains("tree-to-collapse");if("disable"===e){if(o)return;return i.classList.add("tree-disable"),void(i.textContent=n||".")}o&&i.classList.remove("tree-disable"),"toggle"===e&&(e=!r),e?(i.classList.remove("tree-to-collapse"),(o||e!=r)&&(i.textContent=n||"+")):(i.classList.add("tree-to-collapse"),(o||e!=r)&&(i.textContent=n||"-"))}}},{14:14,23:23}],56:[function(t,e,n){var i=t(17),o=t(54),r=t(13),a=new r.class({option:{},leftWidthList:null,rightBorderList:null,leftBorderList:null,rightWidthList:null,el1:null,top0:null,left0:null,leftWidth0:null,rightBorder0:null,rightBorderWidth0:null,leftBorder0:null,leftBorderWidth0:null,rightWidth0:null,start:function(t,e){var n,a,s,l,c;for(this.el1=e,this.top0=e.style.top,this.left0=o.left(e),this.leftWidth0=l=[],a=this.leftWidthList.length,n=0;n<a;n++)l[l.length]=o.width(this.leftWidthList[n]);for(this.rightWidth0=l=[],a=this.rightWidthList.length,n=0;n<a;n++)l[l.length]=o.width(this.rightWidthList[n]);for(this.rightBorder0=l=[],this.rightBorderWidth0=c=[],a=this.rightBorderList.length,n=0;n<a;n++)s=i(this.rightBorderList[n]),l[l.length]=o.right(s),c[c.length]=s.offsetWidth;for(this.leftBorder0=l=[],this.leftBorderWidth0=c=[],a=this.leftBorderList.length,n=0;n<a;n++)s=i(this.leftBorderList[n]),l[l.length]=o.left(s),c[c.length]=s.offsetWidth;this.el1.style.background="lightgrey",this.option.callback&&this.option.callback("start"),r.start.apply(this,arguments)},onStop:function(t){r.onStop.apply(this,arguments),this.el1.style.background="",this.el1=null,this.option.callback&&this.option.callback("stop")},onMove:function(t){if(r.onMove.apply(this,arguments),this.moveChanged){this.el1.style.top=this.top0;var e,n,o,a=parseInt(this.el1.style.left)-this.left0,s=this.option;for(n=this.leftWidthList.length,e=0;e<n;e++)(o=this.leftWidth0[e]+a)<s.minLeft&&(a=s.minLeft-this.leftWidth0[e]),s.maxLeft&&o>s.maxLeft&&(a=s.maxLeft-this.leftWidth0[e]);for(n=this.rightBorderList.length,e=0;e<n;e++)(o=this.rightBorderWidth0[e]+a)<s.minLeft&&(a=s.minLeft-this.rightBorderWidth0[e]),s.maxLeft&&o>s.maxLeft&&(a=s.maxLeft-this.rightBorderWidth0[e]);for(n=this.leftBorderList.length,e=0;e<n;e++)(o=this.leftBorderWidth0[e]-a)<s.minRight&&(a=-(s.minRight-this.leftBorderWidth0[e])),s.maxRight&&o>s.maxRight&&(a=-(s.maxRight-this.leftBorderWidth0[e]));for(n=this.rightWidthList.length,e=0;e<n;e++)(o=this.rightWidth0[e]-a)<s.minRight&&(a=-(s.minRight-this.rightWidth0[e])),s.maxRight&&o>s.maxRight&&(a=-(s.maxRight-this.rightWidth0[e]));for(n=this.leftWidthList.length,e=0;e<n;e++)i(this.leftWidthList[e]).style.width=this.leftWidth0[e]+a+"px";for(n=this.rightBorderList.length,e=0;e<n;e++)i(this.rightBorderList[e]).style.right=this.rightBorder0[e]-a+"px";for(n=this.leftBorderList.length,e=0;e<n;e++)i(this.leftBorderList[e]).style.left=this.leftBorder0[e]+a+"px";for(n=this.rightWidthList.length,e=0;e<n;e++)i(this.rightWidthList[e]).style.width=this.rightWidth0[e]-a+"px";this.el1.style.left=a+this.left0+"px",s.callback&&s.callback("move",a)}}});a.init(),WidthSplitterDragObjectClass=function(t,e,n,o,r,s){var l=typeof s;"function"===l?s={callback:s}:"number"===l?s={min:s}:s||(s={}),s.minLeft=s.minLeft||s.min||0,s.maxLeft=s.maxLeft||s.max||0,s.minRight=s.minRight||s.min||0,s.maxRight=s.maxRight||s.max||0,s.callback=s.callback||s.cb,e instanceof Array||(e=e?[e]:[]),n instanceof Array||(n=n?[n]:[]),o instanceof Array||(o=o?[o]:[]),r instanceof Array||(r=r?[r]:[]),(t=i(t)).style.cursor="ew-resize",t.style.userSelect="none";var c=Object.create(a);return c.init(),c.option=s,c.leftWidthList=e,c.rightBorderList=n,c.leftBorderList=o,c.rightWidthList=r,t.onmousedown=function(){c.start(arguments[0],this)},t.ontouchstart=t.onmousedown,c},e.exports=n=function(t,e,n,i,o,r){return new WidthSplitterDragObjectClass(t,e,n,i,o,r)},n.widthSplitterDragObject=a,n.class=WidthSplitterDragObjectClass},{13:13,17:17,54:54}],_package_json:[function(t,e,n){e.exports={name:"tpsvr",version:"1.0.1",description:"test page server",main:"application/server/tpsvr-main.js",scripts:{test:'echo "Error: no test specified" && exit 1'},keywords:["test","http","server"],author:"fwg",license:"ISC",bin:{tpsvr:"application/bin/cmd.js"},repository:{type:"git",url:"git+https://github.com/adf0001/tpsvr.git"},bugs:{url:"https://github.com/adf0001/tpsvr/issues"},homepage:"https://github.com/adf0001/tpsvr#readme",dependencies:{"@babel/core":"^7.17.5","@babel/preset-env":"^7.16.11","argv-config":"^1.0.4",babelify:"^10.0.0","browserify-stringify-minimize-css-content":"^1.0.1","bundle-collapser":"^1.4.0","core-js":"^3.21.1","delay-set-timeout":"^1.0.2","easy-http-server":"^1.0.1","htm-tool":"^1.0.23","http-request-text":"^1.0.5","multiple-spawn":"^1.0.14","open-url-by-browser":"^1.0.1","package-json-data-set":"^1.0.2","package-json-explore-view":"^1.0.3","response-long-poll-state":"^1.0.4","response-tool":"^1.0.4",stringify:"^5.2.0",supervisor:"^0.12.0",terser:"^5.11.0","version-value-set":"^1.0.2",watchify:"^4.0.0"},devDependencies:{}}},{}],"htm-tool":[function(t,e,n){var i=t(17),o=t(14),r=t(15),a=t(53),s=t(34),l=t(5),c=t(23),u=t(36),p=t(10),d=t(16),h=t(8),f=t(19),m=t(7),g=t(22),b=t(6),v=t(25),y=t(12),x=t(35),k=t(18),w="htm-tool@npm";e.exports=Object.assign((function(){return i.apply(this,arguments)}),{globalVarName:w,ele:i,eleFromId:o.from,eleId:o,eleOffset:r,tmkt:a,dateString19:a.toString19,dateString14:a.toString14,dateDiffDhm:a.diffDhm,path_tool:s,dirPart:s.dirPart,normalizePath:s.normalize,pathKey:s.keyString,addCssText:l,insertAdjacent:c,appendHtml:c.append,appendBodyHtml:function(t,e){return c.append(document.body,t,e)},prependHtml:c.prepend,query_by_attribute:x,get_search_part:k,dispatch_event_by_name:y,observe_single_mutation:v,query_by_name_path:u,queryByNamePath:u,create_assign:p,derive:p,deriveObject:p,formatError:d,Error:d,browser_http_request:h,httpRequest:h.requestText,httpRequestJson:h.requestJson,bind_ui:m,bindUi:m,bindElement:b,bindElementArray:b.array,ui:g,show_log:g.show_log,showLog:g.showLog,drag:g.drag,popup:g.popup,showPopupHtml:g.showPopupHtml,alert:g.alert,confirm:g.confirm,confirmYnc:g.confirmYnc,prompt:g.prompt,selectRadioList:g.selectRadioList,selectCheckboxList:g.selectCheckboxList,selectButtonList:g.selectButtonList,setClass:f,setElClass:f.setEl}),"undefined"!=typeof window&&window&&(window[w]=e.exports)},{10:10,12:12,14:14,15:15,16:16,17:17,18:18,19:19,22:22,23:23,25:25,34:34,35:35,36:36,5:5,53:53,6:6,7:7,8:8}],"main-view":[function(t,e,n){var i=t("htm-tool"),o=t(54),r=t(2),a=t(27);e.exports={config:{htmlText:t(4),cssText:t(3),bindArray:["project-list.list",["on","click","onClickProjectList"],"project-list.tool",["on","click","onClickProjectTool"],"top-bar.view-type",["on","click","updateProjectView"],"top-bar.operate.bundle",["on","click","onClickBundle"],"top-bar.operate.more",["on","click","onClickMore"],".iframe-page",["on","load","onIframeChange"],"top-bar.browse-tool.vscode",["on","click","onClickVscode"],"top-bar.add-package",["on","click","onClickAddPackage"],"top-bar.refresh-view",["on","click","onClickRefreshView"]],init:"init"},projectData:null,lastSelected:null,init:function(t){var e=this;i.ui.radio_group(this.nme("top-bar.view-type"));var n=this.nme("splitter");o.left(n),n.style.left=Math.round(parseInt(n.style.left)-n.offsetWidth/2)+"px",i.ui.width_splitter(n,this.nme("project-list"),null,[this.nme("top-bar"),this.nme("iframe-page").parentNode,this.nme("iframe-mask")],null,{min:50,callback:function(t){"start"===t?e.nme("iframe-mask").style.visibility="visible":"move"===t?e.onTopbarResize():"stop"===t&&(e.nme("iframe-mask").style.visibility="hidden")}}),window.addEventListener("resize",this.onTopbarResize.bind(this)),this.onTopbarResize(),i.httpRequestJson("/?cmd=listProject","GET","","",(function(t,n){if(t)e.nme("project-list.list").innerHTML=JSON.stringify(t);else{e.projectData=n.responseJson;var i=Object.keys(e.projectData);i.sort();var o,r=[];for(o=0;o<i.length;o++)r[r.length]="<span class='ht cmd' name=\""+i[o]+'">'+i[o]+"</span>";e.nme("project-list.list").innerHTML=r.join("<br>"),e.updateListCount()}})),setTimeout((function(){e.getLongPollState()}),1e3)},onClickProjectList:function(t){var e=t.target;"SPAN"!=e.tagName.toUpperCase()||e.className.indexOf("cmd")<0||(this.lastSelected&&this.lastSelected.classList.remove("selected"),e.classList.add("selected"),this.lastSelected=e,this.nme("top-bar.operate").style.display="",this.updateProjectView(),this.updateSelectedBundleState())},getViewType:function(){return i.ui.radio_group.getValue(this.nme("top-bar.view-type"))},lastFrameUrl:"",lastFrameTime:0,onClickRefreshView:function(){this.updateProjectView()},updateProjectView:function(t){if((!t||!t.target||"INPUT"==t.target.tagName.toUpperCase())&&this.lastSelected){var e=this.lastSelected.textContent,n=this.getViewType(),i="/";(i+="browse"==n?e+"/*/":"console"==n?"?cmd=viewConsole&project="+encodeURIComponent(e):e+"/*/test/test.htm")===this.lastFrameUrl&&(new Date).getTime()-this.lastFrameTime<1e3||(this.lastFrameUrl=i,this.lastFrameTime=(new Date).getTime(),this.nme("top-bar.address-link").textContent="",this.nme("top-bar.address-link").href="",this.nme(".iframe-page").src=i)}},onTopbarResize:function(){var t=this.nme("top-bar").scrollHeight+2,e=this.nme(".iframe-page").parentNode,n=this.nme("iframe-mask");Math.abs(parseInt(e.style.top)-t)>1&&(e.style.top=t+"px",n.style.top=t+"px")},onIframeChange:function(){var t=this.nme(".iframe-page"),e=t.contentWindow.location.href;this.nme("top-bar.address-link").textContent=decodeURIComponent(e),this.nme("top-bar.address-link").href=e,this.onTopbarResize();var n=t.contentWindow.location,i=n.pathname,o="browse"===this.getViewType()&&"about:blank"!=n.href?1:0,r=o&&!i.match(/[\\\/]$/);this.nme("top-bar.browse-tool").style.display=o?"":"none",this.nme("go-back").style.display=r?"":"none";var a=this.nme("top-bar.add-package"),s=!1;if(e&&e.match(/\/package\.json$/)){var l=JSON.parse(t.contentWindow.document.body.textContent);l.name&&!(l.name in this.projectData)&&(s=!0)}a.style.display=s?"":"none"},onClickAddPackage:function(){var t=this.lastSelected.textContent,e=this.nme(".iframe-page").contentWindow.location.href,n=this.projectData[t].path+e.slice(e.indexOf("/*/")+2).replace(/package\.json$/,"");i.httpRequestJson("/?cmd=addProject&path="+encodeURIComponent(n),"GET","","",(function(t,e){t&&i.show_log(t.responseText||t)}))},onClickVscode:function(){var t=this.nme("top-bar.address-link").textContent,e=t.indexOf("/*/");if(!(e<0)){t=t.slice(e+2);var n=this.lastSelected.getAttribute("name");t=this.projectData[n].path+t,window.open("vscode://file/"+t,"_blank")}},onClickBundle:function(){if(this.lastSelected){var t=this.nme("top-bar.operate.bundle").checked;this.nme("top-bar.operate.bundle").checked=!t;var e=this.lastSelected.textContent;i.httpRequestJson("/?cmd="+(t?"startBundle":"stopBundle")+"&project="+encodeURIComponent(e),"GET","","",(function(t,e){t&&i.show_log(t.responseText||t)}))}},longPoll:null,getLongPollState:function(){var t=this.longPoll||(this.longPoll={lastState:null,errorCount:0});t.tmid&&(clearTimeout(t.tmid),t.tmid=null),t.xhr&&(t.lastState=null,t.xhr.abort(),t.xhr=null);var e=this,n=t.lastState&&t.lastState.version?encodeURIComponent(JSON.stringify(t.lastState.version)):"",o=t.xhr=i.httpRequest("/?cmd=getLongPollState&"+(n?"state_version="+n:"current=1"),"GET","","",(function(n,r){t.xhr===o&&(t.xhr=null),t.tmid=setTimeout(e._getLongPollState||(e._getLongPollState=e.getLongPollState.bind(e)),t.errorCount<3?1e3:2e4),!n&&r.responseText&&r.responseText.match(/^\/+\s+/)?(t.errorCount=0,t.lastState=JSON.parse(r.responseText.replace(/^\/+\s+/,"")),e.updateState(t.lastState)):n&&0!==n.status&&(i.show_log("long poll state fail, "+n),t.lastState=null,t.errorCount++)}))},lastState:null,updateState:function(t){var e,n,i,o,r=this.lastState||(this.lastState={version:{},data:{}});for(e in t.data){for(n in i=t.data[e],(o=r.data[e])||(o=r.data[e]={}),i)i[n]!=o[n]&&(o[n]=i[n],"bundle"===e?this.updateBundleState(n,i[n]):"projects"===e&&this.updateProjectState(n,i[n]));for(n in o)i[n]!=o[n]&&(o[n]=i[n],"bundle"===e?this.updateBundleState(n,i[n]):"projects"===e&&this.updateProjectState(n,i[n]))}this.lastState.version=t.version,this.updateSelectedBundleState()},updateSelectedBundleState:function(){if(this.lastSelected&&this.lastState){var t=this.lastSelected.getAttribute("name"),e=this.lastState.data.bundle&&this.lastState.data.bundle[t];this.updateBundleState(t,e),this.nme("top-bar.operate.bundle").checked=!!e}},updateListCount:function(){this.nme("project-list.list-count").innerHTML=Object.keys(this.projectData).length},updateProjectState:function(t,e){var n=this.nme("project-list.list").querySelector("span[name='"+t+"']");if(n&&!e)n===this.lastSelected&&this.unselectProject(),n.previousSibling?n.parentNode.removeChild(n.previousSibling):n.nextSibling&&n.parentNode.removeChild(n.nextSibling),n.parentNode.removeChild(n),delete this.projectData[t],this.updateListCount();else if(!n&&e){var o=this;i.httpRequestJson("/?cmd=listProject&project="+t,"GET","","",(function(e,n){if(e)i.show_log(e.responseText||e);else{o.projectData[t]=n.responseJson;var r=o.nme("project-list.list");i.appendHtml(r,(r.firstChild?"<br>":"")+"<span class='ht cmd' name=\""+t+'">'+t+"</span>"),o.updateListCount()}}))}},updateBundleState:function(t,e){var n=this.nme("project-list.list").querySelector("span[name='"+t+"']");n&&(e?n.classList.add("state-bundle"):n.classList.remove("state-bundle"))},onClickMore:function(){var t=this,e=this.lastState.data.sys.platform;e=e&&e.match(/^win/i)?"bat":"sh";i.ui.selectButtonList("Project operations",[["createTestData","<div style='text-align:left;' title='create test code, required.'>Create file 'test-data.js'</div>"],["createBundleTool","<div style='text-align:left;' title='create test module bundle tool, optional.'>Create file 'test-bundle."+e+"' (optional)</div>"],["createTestHtm","<div style='text-align:left;' title='create test page, optional.'>Create file 'test.htm' (optional)</div>"],["tryMinimizeBundle","<div style='text-align:left;' title='try bundling only main module, and minimize it.'>Try minimize bundle</div>"],["createMiniBundleTool","<div style='text-align:left;' title='create main module minimize bundle tool, optional.'>Create file 'main-minimize."+e+"' (optional)</div>"]],{maxHeight:"15em"},(function(e,n){n&&t[n]&&t[n]()}))},sendProjectCmd:function(t){var e=this.lastSelected&&this.lastSelected.getAttribute("name")||"";e?i.httpRequestJson("/?cmd="+t+"&project="+e,"GET","","",(function(t,e){if(t)i.show_log(t.responseText||t);else{var n=e.responseJson;"string"!=typeof n&&(n=JSON.stringify(n,null,"\t")),i.alert(n.replace(/[\n\r]+/g,"<br>"),!1)}})):this.unselectProject()},createTestData:function(){this.sendProjectCmd("createTestData")},createTestHtm:function(){this.sendProjectCmd("createTestHtm")},createBundleTool:function(){this.sendProjectCmd("createBundleTool")},tryMinimizeBundle:function(){this.sendProjectCmd("tryMinimizeBundle")},createMiniBundleTool:function(){this.sendProjectCmd("createMiniBundleTool")},onClickProjectTool:function(){var t=this.lastSelected&&this.lastSelected.getAttribute("name")||"",e=[["addProject","Add project"],t?["removeProject","Detach project / "+t]:null,t?["explorePackage","Explore package / "+t]:null,"-",["reloadProject","Reload all projects"]],n=this;i.ui.selectButtonList("Projects tool",e,(function(t,e){e&&n[e]&&n[e]()}))},explorePackageView:null,packageDataset:null,loadPackage:function(t,e,n){i.httpRequestJson("/?cmd=loadPackage&name="+encodeURIComponent(e)+"&path="+encodeURIComponent(t),"GET","","",(function(t,e){if(t)return i.show_log(t.responseText||t),void n(t);var o=decodeURIComponent(e.headers["package-path"]);o=i.dirPart(o,!0),n(null,{path:o,pkg:e.responseJson})}))},_loadPackage:null,explorePackage:function(){var t=this.nme(".package-view");if(!this.explorePackageView){t.innerHTML="<div class='ht popup-body' style='min-width:30em;min-height:15em;'></div>",this.explorePackageView=new r.class(t.firstChild);var e=this;this.explorePackageView.setLocalLabel("tpsvr","open in tpsvr ui",(function(t){if(t.target.classList.contains("local-label")){var n=t.target.previousSibling.href;n&&("browse"===e.getViewType()&&i.ui.radio_group.setValue(e.nme("top-bar.view-type"),"browse"),setTimeout((function(){e.nme(".iframe-page").src=n}),200))}}))}var n=this.lastSelected.getAttribute("name"),o=this.projectData[n];this.packageDataset&&this.packageDataset.isTop({pkg:o.config,path:o.path},!0)||(this.packageDataset=new a.class(o.config,o.path,this._loadPackage||(this._loadPackage=this.loadPackage.bind(this))),this.explorePackageView.updateView(this.packageDataset)),i.popup.show(t,this.explorePackageView.popupOptions)},unselectProject:function(){this.lastSelected&&(this.nme(".iframe-page").src="about:blank",this.lastSelected=null,this.nme("top-bar.operate").style.display="none")},removeProject:function(){var t=this.lastSelected&&this.lastSelected.getAttribute("name")||"";t?i.confirm("detach project '"+t+"'?",(function(e,n){!e&&n&&i.httpRequestJson("/?cmd=removeProject&name="+t,"GET","","",(function(t,e){t&&i.show_log(t.responseText||t)}))})):this.unselectProject()},reloadProject:function(){i.httpRequestJson("/?cmd=reloadProject","GET","","",(function(t,e){t?i.show_log(t.responseText||t):window.location.reload()}))},addProject:function(){i.prompt("add new project path","",(function(t,e){!t&&e&&i.httpRequestJson("/?cmd=addProject&path="+e,"GET","","",(function(t,e){t&&i.show_log(t.responseText||t)}))}))}},e.exports.class=function(t,n){return i.bindUi(t,Object.create(e.exports),null,n)}},{2:2,27:27,3:3,4:4,54:54,"htm-tool":"htm-tool"}]},{},[]);